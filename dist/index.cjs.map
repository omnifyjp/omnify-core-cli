{"version":3,"sources":["../src/index.ts","../src/config/loader.ts","../src/config/discovery.ts","../src/output/logger.ts","../src/config/alias-config.ts","../src/commands/init.ts","../src/commands/validate.ts","../src/commands/diff.ts","../src/operations/diff.ts","../src/commands/generate.ts","../src/guides/index.ts"],"sourcesContent":["/**\n * @famgia/omnify-cli\n * Command-line interface for omnify-schema\n *\n * This file contains only exports (no side effects).\n * For CLI execution, import './cli.js' instead.\n */\n\n// Re-export for programmatic usage\nexport { defineConfig, loadConfig } from './config/index.js';\nexport type {\n  OmnifyConfig,\n  ResolvedOmnifyConfig,\n  DatabaseConfig,\n  DatabaseDriver,\n  OutputConfig,\n  LaravelOutputConfig,\n  TypeScriptOutputConfig,\n  AdditionalSchemaPath,\n  PackageLaravelOutputConfig,\n  PackageOutputConfig,\n} from './config/types.js';\n\n// Export commands for programmatic usage\nexport { runInit, registerInitCommand } from './commands/init.js';\nexport { registerValidateCommand } from './commands/validate.js';\nexport { registerDiffCommand } from './commands/diff.js';\nexport { registerGenerateCommand } from './commands/generate.js';\n\n// Export logger for plugins\nexport { logger } from './output/logger.js';\n","/**\n * @famgia/omnify-cli - Configuration Loader\n *\n * Loads and resolves omnify.config.ts configuration.\n */\n\nimport { existsSync } from 'node:fs';\nimport { resolve, dirname } from 'node:path';\nimport { createJiti } from 'jiti';\nimport type { OmnifyConfig, ResolvedOmnifyConfig, OmnifyPlugin, ConfigLoadResult, DiscoveryConfig } from './types.js';\nimport { configError, configNotFoundError } from '@famgia/omnify-core';\nimport { discoverPackages } from './discovery.js';\n\n/**\n * Configuration file names to search for (in order of priority).\n */\nconst CONFIG_FILES = [\n  'omnify.config.ts',\n  'omnify.config.js',\n  'omnify.config.mjs',\n  'omnify.config.cjs',\n];\n\n/**\n * Finds configuration file in directory.\n */\nexport function findConfigFile(startDir: string): string | null {\n  const cwd = resolve(startDir);\n\n  for (const filename of CONFIG_FILES) {\n    const configPath = resolve(cwd, filename);\n    if (existsSync(configPath)) {\n      return configPath;\n    }\n  }\n\n  return null;\n}\n\n/**\n * Loads configuration from file using jiti.\n */\nasync function loadConfigFile(configPath: string): Promise<OmnifyConfig> {\n  const jiti = createJiti(configPath, {\n    interopDefault: true,\n    moduleCache: false,\n  });\n\n  try {\n    const module = await jiti.import(configPath);\n    const config = module as OmnifyConfig;\n\n    // Handle default export\n    if ('default' in config) {\n      return (config as { default: OmnifyConfig }).default;\n    }\n\n    return config;\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    throw configError(\n      `Failed to load config file: ${message}. Check your omnify.config.ts for syntax errors.`,\n      'E002'\n    );\n  }\n}\n\n/**\n * Resolves plugins from configuration.\n * Handles both string (npm package) and object plugins.\n */\nasync function resolvePlugins(\n  plugins: readonly (string | OmnifyPlugin)[] | undefined,\n  configPath: string | null\n): Promise<OmnifyPlugin[]> {\n  if (!plugins || plugins.length === 0) {\n    return [];\n  }\n\n  const resolved: OmnifyPlugin[] = [];\n  const configDir = configPath ? dirname(configPath) : process.cwd();\n\n  for (const plugin of plugins) {\n    if (typeof plugin === 'string') {\n      // Load plugin from npm package\n      const jiti = createJiti(configDir, {\n        interopDefault: true,\n        moduleCache: false,\n      });\n\n      try {\n        const module = await jiti.import(plugin);\n        const loadedPlugin = (module as { default?: OmnifyPlugin }).default ?? module;\n        resolved.push(loadedPlugin as OmnifyPlugin);\n      } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        throw configError(\n          `Failed to load plugin '${plugin}': ${message}. Ensure the plugin is installed: npm install ${plugin}`,\n          'E301'\n        );\n      }\n    } else {\n      // Direct plugin object\n      resolved.push(plugin);\n    }\n  }\n\n  return resolved;\n}\n\n/**\n * Resolves configuration with defaults.\n */\nexport async function resolveConfig(\n  userConfig: OmnifyConfig,\n  configPath: string | null\n): Promise<ResolvedOmnifyConfig> {\n  const plugins = await resolvePlugins(userConfig.plugins, configPath);\n  const projectRoot = configPath ? dirname(configPath) : process.cwd();\n\n  // Build discovery config with defaults\n  const discovery: DiscoveryConfig = {\n    enabled: userConfig.discovery?.enabled ?? true,\n    exclude: userConfig.discovery?.exclude,\n  };\n\n  // Discover packages and merge with explicit additionalSchemaPaths\n  const allSchemaPaths = discoverPackages(\n    projectRoot,\n    discovery,\n    userConfig.additionalSchemaPaths\n  );\n\n  // Build database config, only including defined optional properties\n  const databaseConfig = {\n    driver: userConfig.database.driver,\n    enableFieldComments: userConfig.database.enableFieldComments ?? false,\n  };\n  // Only add devUrl if defined\n  const database = userConfig.database.devUrl !== undefined\n    ? { ...databaseConfig, devUrl: userConfig.database.devUrl }\n    : databaseConfig;\n\n  // Build laravel output config\n  const laravelConfig = {\n    migrationsPath: userConfig.output?.laravel?.migrationsPath ?? 'database/migrations',\n  };\n  // Only add optional properties if they are defined\n  const laravel = buildLaravelConfig(laravelConfig, userConfig.output?.laravel);\n\n  // Build typescript output config\n  const tsConfig = userConfig.output?.typescript;\n  const typescript = {\n    path: tsConfig?.path ?? 'types',\n    schemasDir: tsConfig?.schemasDir ?? 'schemas',\n    enumDir: tsConfig?.enumDir ?? 'enum',\n    singleFile: tsConfig?.singleFile ?? true,\n    generateEnums: tsConfig?.generateEnums ?? true,\n    generateRelationships: tsConfig?.generateRelationships ?? true,\n  };\n\n  const result: ResolvedOmnifyConfig = {\n    schemasDir: userConfig.schemasDir ?? './schemas',\n    database: database as ResolvedOmnifyConfig['database'],\n    output: {\n      laravel,\n      typescript,\n    } as ResolvedOmnifyConfig['output'],\n    plugins,\n    verbose: userConfig.verbose ?? false,\n    lockFilePath: userConfig.lockFilePath ?? '.omnify.lock',\n    discovery,\n    ...(userConfig.locale && { locale: userConfig.locale }),\n    ...(allSchemaPaths.length > 0 && { additionalSchemaPaths: allSchemaPaths }),\n  };\n\n  return result;\n}\n\n/**\n * Builds Laravel config with only defined optional properties.\n */\nfunction buildLaravelConfig(\n  base: { migrationsPath: string },\n  userLaravel?: Readonly<{\n    migrationsPath?: string;\n    modelsPath?: string;\n    baseModelsPath?: string;\n    providersPath?: string;\n    modelsNamespace?: string;\n    factoriesPath?: string;\n    enumsPath?: string;\n    enumsNamespace?: string;\n  }>\n): ResolvedOmnifyConfig['output']['laravel'] {\n  const config: ResolvedOmnifyConfig['output']['laravel'] = { ...base };\n\n  if (userLaravel?.modelsPath !== undefined) {\n    (config as { modelsPath: string }).modelsPath = userLaravel.modelsPath;\n  }\n  if (userLaravel?.baseModelsPath !== undefined) {\n    (config as { baseModelsPath: string }).baseModelsPath = userLaravel.baseModelsPath;\n  }\n  if (userLaravel?.providersPath !== undefined) {\n    (config as { providersPath: string }).providersPath = userLaravel.providersPath;\n  }\n  if (userLaravel?.modelsNamespace !== undefined) {\n    (config as { modelsNamespace: string }).modelsNamespace = userLaravel.modelsNamespace;\n  }\n  if (userLaravel?.factoriesPath !== undefined) {\n    (config as { factoriesPath: string }).factoriesPath = userLaravel.factoriesPath;\n  }\n  if (userLaravel?.enumsPath !== undefined) {\n    (config as { enumsPath: string }).enumsPath = userLaravel.enumsPath;\n  }\n  if (userLaravel?.enumsNamespace !== undefined) {\n    (config as { enumsNamespace: string }).enumsNamespace = userLaravel.enumsNamespace;\n  }\n\n  return config;\n}\n\n/**\n * Validates required configuration.\n */\nexport function validateConfig(config: ResolvedOmnifyConfig, rootDir: string): void {\n  // Validate schema directory exists\n  const schemaPath = resolve(rootDir, config.schemasDir);\n  if (!existsSync(schemaPath)) {\n    throw configError(\n      `Schema directory not found: ${schemaPath}. Create the '${config.schemasDir}' directory or update schemasDir in config.`,\n      'E002'\n    );\n  }\n}\n\n/**\n * Validates that devUrl is configured (required for diff/generate operations).\n */\nexport function requireDevUrl(config: ResolvedOmnifyConfig): void {\n  if (!config.database.devUrl) {\n    throw configError(\n      `database.devUrl is required for diff and generate operations. Add devUrl to your database config, e.g., \"mysql://root@localhost:3306/omnify_dev\"`,\n      'E003'\n    );\n  }\n}\n\n/**\n * Loads configuration from file or returns defaults.\n */\nexport async function loadConfig(startDir: string = process.cwd()): Promise<ConfigLoadResult> {\n  const cwd = resolve(startDir);\n  const configPath = findConfigFile(cwd);\n\n  if (configPath) {\n    const userConfig = await loadConfigFile(configPath);\n    const config = await resolveConfig(userConfig, configPath);\n\n    return {\n      config,\n      configPath,\n    };\n  }\n\n  // No config file found - require config file\n  throw configNotFoundError(resolve(cwd, 'omnify.config.ts'));\n}\n\n/**\n * Helper function for type-safe configuration.\n * Used in omnify.config.ts files.\n */\nexport function defineConfig(config: OmnifyConfig): OmnifyConfig {\n  return config;\n}\n","/**\n * Package Auto-Discovery Module\n *\n * Reads `.omnify-packages.json` manifest generated by Composer plugin\n * and merges discovered packages with explicit additionalSchemaPaths.\n */\n\nimport { existsSync, readFileSync } from 'node:fs';\nimport { resolve, dirname } from 'node:path';\nimport type {\n  OmnifyPackagesManifest,\n  OmnifyPackageConfig,\n  AdditionalSchemaPath,\n  DiscoveryConfig,\n} from './types.js';\nimport { logger } from '../output/logger.js';\n\n/** Default manifest filename */\nconst MANIFEST_FILENAME = '.omnify-packages.json';\n\n/** Current manifest version */\nconst MANIFEST_VERSION = 1;\n\n/**\n * Load package manifest from project root.\n *\n * @param projectRoot - Project root directory\n * @returns Parsed manifest or null if not found\n */\nexport function loadPackageManifest(projectRoot: string): OmnifyPackagesManifest | null {\n  const manifestPath = resolve(projectRoot, MANIFEST_FILENAME);\n\n  if (!existsSync(manifestPath)) {\n    logger.debug(`Package manifest not found: ${manifestPath}`);\n    return null;\n  }\n\n  try {\n    const content = readFileSync(manifestPath, 'utf-8');\n    const manifest = JSON.parse(content) as OmnifyPackagesManifest;\n\n    // Validate version\n    if (manifest.version !== MANIFEST_VERSION) {\n      logger.warn(\n        `Package manifest version mismatch: expected ${MANIFEST_VERSION}, got ${manifest.version}. ` +\n        'Run `composer dump-autoload` to regenerate.'\n      );\n    }\n\n    return manifest;\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    logger.warn(`Failed to read package manifest: ${message}`);\n    return null;\n  }\n}\n\n/**\n * Convert package config from manifest to AdditionalSchemaPath.\n *\n * @param packageName - Package name (e.g., 'vendor/package')\n * @param config - Package configuration from manifest\n * @returns AdditionalSchemaPath entry\n */\nfunction packageConfigToSchemaPath(\n  packageName: string,\n  config: OmnifyPackageConfig\n): AdditionalSchemaPath {\n  const result: AdditionalSchemaPath = {\n    path: config.schemas,\n    namespace: config.namespace,\n  };\n\n  // Convert package options to output config\n  if (config.options) {\n    const opts = config.options;\n    const basePath = config.schemas.replace(/\\/database\\/schemas\\/?$/, '');\n\n    const laravelOutput: Record<string, unknown> = {\n      base: basePath,\n    };\n\n    if (opts.modelNamespace) {\n      laravelOutput.modelsNamespace = opts.modelNamespace;\n    }\n    if (opts.migrationsPath) {\n      laravelOutput.migrationsPath = opts.migrationsPath.replace(basePath + '/', '');\n    }\n    if (opts.factoriesPath) {\n      laravelOutput.factoriesPath = opts.factoriesPath.replace(basePath + '/', '');\n    }\n    if (opts.generateServiceProvider !== undefined) {\n      laravelOutput.generateServiceProvider = opts.generateServiceProvider;\n    }\n    if (opts.generateMigrations !== undefined) {\n      laravelOutput.generateMigrations = opts.generateMigrations;\n    }\n    if (opts.generateModels !== undefined) {\n      laravelOutput.generateModels = opts.generateModels;\n    }\n\n    (result as { output?: unknown }).output = { laravel: laravelOutput };\n  }\n\n  return result;\n}\n\n/**\n * Discover packages from manifest and merge with explicit paths.\n *\n * @param projectRoot - Project root directory\n * @param discoveryConfig - Discovery configuration\n * @param explicitPaths - Explicit additionalSchemaPaths from config\n * @returns Merged array of schema paths (discovered + explicit)\n */\nexport function discoverPackages(\n  projectRoot: string,\n  discoveryConfig: DiscoveryConfig,\n  explicitPaths?: readonly AdditionalSchemaPath[]\n): AdditionalSchemaPath[] {\n  const result: AdditionalSchemaPath[] = [];\n  const excludeSet = new Set(discoveryConfig.exclude ?? []);\n\n  // Load auto-discovered packages\n  if (discoveryConfig.enabled !== false) {\n    const manifest = loadPackageManifest(projectRoot);\n\n    if (manifest) {\n      // Sort by priority (lower = first)\n      const sortedPackages = Object.entries(manifest.packages).sort(\n        ([, a], [, b]) => (a.priority ?? 100) - (b.priority ?? 100)\n      );\n\n      for (const [packageName, config] of sortedPackages) {\n        // Skip excluded packages\n        if (excludeSet.has(packageName)) {\n          logger.debug(`Skipping excluded package: ${packageName}`);\n          continue;\n        }\n\n        // Skip if schema path doesn't exist\n        const schemasPath = resolve(projectRoot, config.schemas);\n        if (!existsSync(schemasPath)) {\n          logger.debug(`Package schemas not found, skipping: ${schemasPath}`);\n          continue;\n        }\n\n        result.push(packageConfigToSchemaPath(packageName, config));\n        logger.debug(`Discovered package: ${packageName} (${config.namespace ?? 'no namespace'})`);\n      }\n\n      if (result.length > 0) {\n        logger.info(`Auto-discovered ${result.length} package(s) from ${MANIFEST_FILENAME}`);\n      }\n    }\n  }\n\n  // Append explicit paths (they take precedence / can override)\n  if (explicitPaths?.length) {\n    result.push(...explicitPaths);\n  }\n\n  return result;\n}\n\n/**\n * Get the manifest file path for a project.\n */\nexport function getManifestPath(projectRoot: string): string {\n  return resolve(projectRoot, MANIFEST_FILENAME);\n}\n","/**\n * @famgia/omnify-cli - Logger\n *\n * CLI output and logging utilities.\n */\n\nimport pc from 'picocolors';\nimport { OmnifyError, formatError, getExitCode } from '@famgia/omnify-core';\n\n/**\n * Logger options.\n */\nexport interface LoggerOptions {\n  /** Enable verbose logging */\n  verbose?: boolean;\n  /** Suppress all output except errors */\n  quiet?: boolean;\n}\n\n/**\n * CLI Logger for formatted output.\n */\nexport class Logger {\n  private _verbose: boolean;\n  private _quiet: boolean;\n  private _startTime: number;\n\n  constructor(options: LoggerOptions = {}) {\n    this._verbose = options.verbose ?? false;\n    this._quiet = options.quiet ?? false;\n    this._startTime = Date.now();\n  }\n\n  /**\n   * Enable or disable verbose mode.\n   */\n  setVerbose(verbose: boolean): void {\n    this._verbose = verbose;\n  }\n\n  /**\n   * Enable or disable quiet mode.\n   */\n  setQuiet(quiet: boolean): void {\n    this._quiet = quiet;\n  }\n\n  /**\n   * Log an info message.\n   */\n  info(message: string): void {\n    if (!this._quiet) {\n      console.log(message);\n    }\n  }\n\n  /**\n   * Log a success message.\n   */\n  success(message: string): void {\n    if (!this._quiet) {\n      console.log(pc.green('✓') + ' ' + message);\n    }\n  }\n\n  /**\n   * Log a warning message.\n   */\n  warn(message: string): void {\n    if (!this._quiet) {\n      console.log(pc.yellow('⚠') + ' ' + pc.yellow(message));\n    }\n  }\n\n  /**\n   * Log an error message.\n   */\n  error(message: string): void {\n    console.error(pc.red('✗') + ' ' + pc.red(message));\n  }\n\n  /**\n   * Log a debug message (only in verbose mode).\n   */\n  debug(message: string): void {\n    if (this._verbose && !this._quiet) {\n      console.log(pc.dim('  ' + message));\n    }\n  }\n\n  /**\n   * Log a step message.\n   */\n  step(message: string): void {\n    if (!this._quiet) {\n      console.log(pc.cyan('→') + ' ' + message);\n    }\n  }\n\n  /**\n   * Log a header.\n   */\n  header(message: string): void {\n    if (!this._quiet) {\n      console.log();\n      console.log(pc.bold(message));\n      console.log();\n    }\n  }\n\n  /**\n   * Log a list item.\n   */\n  list(items: string[]): void {\n    if (!this._quiet) {\n      for (const item of items) {\n        console.log('  • ' + item);\n      }\n    }\n  }\n\n  /**\n   * Log a timing message.\n   */\n  timing(message: string): void {\n    if (this._verbose && !this._quiet) {\n      const elapsed = Date.now() - this._startTime;\n      console.log(pc.dim(`  [${elapsed}ms] ${message}`));\n    }\n  }\n\n  /**\n   * Log an empty line.\n   */\n  newline(): void {\n    if (!this._quiet) {\n      console.log();\n    }\n  }\n\n  /**\n   * Format and log an OmnifyError.\n   */\n  formatError(error: OmnifyError): void {\n    const formatted = formatError(error, { color: true });\n    console.error(formatted);\n  }\n\n  /**\n   * Get exit code for an error.\n   */\n  getExitCode(error: OmnifyError): number {\n    return getExitCode(error);\n  }\n}\n\n/**\n * Global logger instance.\n */\nexport const logger = new Logger();\n","/**\n * @famgia/omnify-cli - Alias Configuration Utilities\n *\n * Auto-configures @omnify alias in vite.config.ts and tsconfig.json\n */\n\nimport { existsSync, readFileSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\nimport { logger } from '../output/logger.js';\n\n/**\n * Result of alias configuration\n */\nexport interface AliasConfigResult {\n    viteUpdated: boolean;\n    tsconfigUpdated: boolean;\n    viteSkipped: boolean;\n    tsconfigSkipped: boolean;\n    errors: string[];\n}\n\n/**\n * Check if vite.config.ts already has @omnify alias configured\n */\nfunction hasViteOmnifyAlias(content: string): boolean {\n    // Check for various patterns of @omnify alias\n    return (\n        content.includes(\"'@omnify'\") ||\n        content.includes('\"@omnify\"') ||\n        content.includes('@omnify:') ||\n        content.includes(\"'@omnify/\")\n    );\n}\n\n/**\n * Check if vite.config.ts already has @omnify-base alias configured\n */\nfunction hasViteOmnifyBaseAlias(content: string): boolean {\n    return (\n        content.includes(\"'@omnify-base'\") ||\n        content.includes('\"@omnify-base\"') ||\n        content.includes('@omnify-base/')\n    );\n}\n\n/**\n * Check if tsconfig.json already has @omnify path configured\n */\nfunction hasTsconfigOmnifyPath(content: string): boolean {\n    return (\n        content.includes('\"@omnify/*\"') ||\n        content.includes(\"'@omnify/*'\") ||\n        content.includes('\"@omnify/\"')\n    );\n}\n\n/**\n * Update vite.config.ts to add @omnify alias\n *\n * @param rootDir - Project root directory\n * @param omnifyPath - Path to omnify folder (default: 'omnify')\n * @returns true if updated, false if skipped or failed\n */\nexport function updateViteConfig(\n    rootDir: string,\n    omnifyPath: string = 'omnify'\n): { updated: boolean; skipped: boolean; error?: string } {\n    const configPaths = [\n        resolve(rootDir, 'vite.config.ts'),\n        resolve(rootDir, 'vite.config.js'),\n        resolve(rootDir, 'vite.config.mts'),\n        resolve(rootDir, 'vite.config.mjs'),\n    ];\n\n    // Find existing vite config\n    const configPath = configPaths.find((p) => existsSync(p));\n\n    if (!configPath) {\n        return { updated: false, skipped: true };\n    }\n\n    try {\n        let content = readFileSync(configPath, 'utf-8');\n\n        // Check if already configured\n        if (hasViteOmnifyAlias(content)) {\n            return { updated: false, skipped: true };\n        }\n\n        // Check if there's an existing alias section\n        const aliasPatterns = [\n            // Pattern 1: resolve: { alias: { ... } }\n            /resolve\\s*:\\s*\\{[^}]*alias\\s*:\\s*\\{/,\n            // Pattern 2: alias: { ... } directly in defineConfig\n            /alias\\s*:\\s*\\{/,\n        ];\n\n        let updated = false;\n\n        for (const pattern of aliasPatterns) {\n            const match = content.match(pattern);\n            if (match) {\n                // Insert @omnify alias after opening brace of alias object\n                const insertPoint = match.index! + match[0].length;\n                const aliasLine = `\\n      '@omnify': path.resolve(__dirname, '${omnifyPath}'),`;\n                content = content.slice(0, insertPoint) + aliasLine + content.slice(insertPoint);\n                updated = true;\n                break;\n            }\n        }\n\n        // If no alias section found, try to add one in resolve section\n        if (!updated) {\n            const resolvePattern = /resolve\\s*:\\s*\\{/;\n            const resolveMatch = content.match(resolvePattern);\n\n            if (resolveMatch) {\n                const insertPoint = resolveMatch.index! + resolveMatch[0].length;\n                const aliasSection = `\n    alias: {\n      '@omnify': path.resolve(__dirname, '${omnifyPath}'),\n    },`;\n                content = content.slice(0, insertPoint) + aliasSection + content.slice(insertPoint);\n                updated = true;\n            }\n        }\n\n        // If still not updated, try to add resolve section to defineConfig\n        if (!updated) {\n            // Look for defineConfig({\n            const defineConfigPattern = /defineConfig\\s*\\(\\s*\\{/;\n            const defineConfigMatch = content.match(defineConfigPattern);\n\n            if (defineConfigMatch) {\n                const insertPoint = defineConfigMatch.index! + defineConfigMatch[0].length;\n                const resolveSection = `\n  resolve: {\n    alias: {\n      '@omnify': path.resolve(__dirname, '${omnifyPath}'),\n    },\n  },`;\n                content = content.slice(0, insertPoint) + resolveSection + content.slice(insertPoint);\n\n                // Add path import if not present\n                if (!content.includes(\"import path from\") && !content.includes(\"import * as path\")) {\n                    content = `import path from 'path';\\n` + content;\n                }\n                updated = true;\n            }\n        }\n\n        if (updated) {\n            // Ensure path import exists\n            if (!content.includes(\"import path from\") && !content.includes(\"import * as path\") && !content.includes(\"require('path')\")) {\n                // Add at the top after other imports\n                const importMatch = content.match(/^(import .+;\\n)+/m);\n                if (importMatch) {\n                    const insertPoint = importMatch.index! + importMatch[0].length;\n                    content = content.slice(0, insertPoint) + \"import path from 'path';\\n\" + content.slice(insertPoint);\n                } else {\n                    content = \"import path from 'path';\\n\" + content;\n                }\n            }\n\n            writeFileSync(configPath, content);\n            return { updated: true, skipped: false };\n        }\n\n        return {\n            updated: false,\n            skipped: false,\n            error: 'Could not find suitable location to add alias. Please add manually.',\n        };\n    } catch (error) {\n        return {\n            updated: false,\n            skipped: false,\n            error: `Failed to update vite.config: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n}\n\n/**\n * Update tsconfig.json to add @omnify path\n *\n * @param rootDir - Project root directory\n * @param omnifyPath - Path to omnify folder (default: 'omnify')\n * @returns true if updated, false if skipped or failed\n */\nexport function updateTsconfig(\n    rootDir: string,\n    omnifyPath: string = 'omnify'\n): { updated: boolean; skipped: boolean; error?: string } {\n    const configPath = resolve(rootDir, 'tsconfig.json');\n\n    if (!existsSync(configPath)) {\n        return { updated: false, skipped: true };\n    }\n\n    try {\n        const content = readFileSync(configPath, 'utf-8');\n\n        // Check if already configured\n        if (hasTsconfigOmnifyPath(content)) {\n            return { updated: false, skipped: true };\n        }\n\n        // Parse JSON (with comment removal for safety)\n        const jsonContent = content\n            .replace(/\\/\\/.*$/gm, '') // Remove single-line comments\n            .replace(/\\/\\*[\\s\\S]*?\\*\\//g, ''); // Remove multi-line comments\n\n        let config: Record<string, unknown>;\n        try {\n            config = JSON.parse(jsonContent);\n        } catch {\n            return {\n                updated: false,\n                skipped: false,\n                error: 'Could not parse tsconfig.json as JSON',\n            };\n        }\n\n        // Ensure compilerOptions exists\n        if (!config.compilerOptions) {\n            config.compilerOptions = {};\n        }\n\n        const compilerOptions = config.compilerOptions as Record<string, unknown>;\n\n        // Ensure paths exists\n        if (!compilerOptions.paths) {\n            compilerOptions.paths = {};\n        }\n\n        const paths = compilerOptions.paths as Record<string, string[]>;\n\n        // Add @omnify path\n        paths['@omnify/*'] = [`./${omnifyPath}/*`];\n\n        // Write back with proper formatting\n        // We need to preserve the original formatting as much as possible\n        // Simple approach: use 2-space indent\n        const newContent = JSON.stringify(config, null, 2);\n\n        writeFileSync(configPath, newContent + '\\n');\n        return { updated: true, skipped: false };\n    } catch (error) {\n        return {\n            updated: false,\n            skipped: false,\n            error: `Failed to update tsconfig.json: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n}\n\n/**\n * Configure @omnify alias in both vite.config and tsconfig.json\n *\n * @param rootDir - Project root directory\n * @param omnifyPath - Path to omnify folder (default: 'omnify')\n * @param silent - Don't log messages (for use in generate command)\n */\nexport function configureOmnifyAlias(\n    rootDir: string,\n    omnifyPath: string = 'omnify',\n    silent: boolean = false\n): AliasConfigResult {\n    const result: AliasConfigResult = {\n        viteUpdated: false,\n        tsconfigUpdated: false,\n        viteSkipped: false,\n        tsconfigSkipped: false,\n        errors: [],\n    };\n\n    // Update vite.config\n    const viteResult = updateViteConfig(rootDir, omnifyPath);\n    result.viteUpdated = viteResult.updated;\n    result.viteSkipped = viteResult.skipped;\n    if (viteResult.error) {\n        result.errors.push(viteResult.error);\n    }\n\n    // Update tsconfig.json\n    const tsconfigResult = updateTsconfig(rootDir, omnifyPath);\n    result.tsconfigUpdated = tsconfigResult.updated;\n    result.tsconfigSkipped = tsconfigResult.skipped;\n    if (tsconfigResult.error) {\n        result.errors.push(tsconfigResult.error);\n    }\n\n    // Log results\n    if (!silent) {\n        if (result.viteUpdated) {\n            logger.success('Updated vite.config - Added @omnify alias');\n        }\n        if (result.tsconfigUpdated) {\n            logger.success('Updated tsconfig.json - Added @omnify/* path');\n        }\n        if (result.errors.length > 0) {\n            for (const error of result.errors) {\n                logger.warn(error);\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * Add @omnify-base alias to vite.config for plugin enum imports.\n * This is needed because plugin enums are stored in node_modules/@omnify-base\n */\nexport function addPluginEnumAlias(rootDir: string): { updated: boolean; error?: string } {\n    const configPaths = [\n        resolve(rootDir, 'vite.config.ts'),\n        resolve(rootDir, 'vite.config.js'),\n        resolve(rootDir, 'vite.config.mts'),\n        resolve(rootDir, 'vite.config.mjs'),\n    ];\n\n    const configPath = configPaths.find((p) => existsSync(p));\n    if (!configPath) {\n        return { updated: false };\n    }\n\n    try {\n        let content = readFileSync(configPath, 'utf-8');\n\n        // Check if already configured\n        if (hasViteOmnifyBaseAlias(content)) {\n            return { updated: false };\n        }\n\n        // Find the line with @omnify alias that ends with ), and add new alias after it\n        // Match pattern: '@omnify': ... ),  (handles single and multi-line definitions)\n        const lines = content.split('\\n');\n        let insertIndex = -1;\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i];\n            // Look for line containing @omnify alias\n            if ((line.includes(\"'@omnify'\") || line.includes('\"@omnify\"')) && line.includes(':')) {\n                // Find the line where this alias definition ends (with ),)\n                for (let j = i; j < lines.length; j++) {\n                    if (lines[j].includes('),') || (lines[j].trim().endsWith(',') && lines[j].includes(')'))) {\n                        insertIndex = j + 1;\n                        break;\n                    }\n                }\n                break;\n            }\n        }\n\n        if (insertIndex > 0) {\n            const indent = '      '; // Match typical Vite config indentation\n            const aliasLine = `${indent}'@omnify-base': path.resolve(__dirname, 'node_modules/@omnify-base'),`;\n            lines.splice(insertIndex, 0, aliasLine);\n            content = lines.join('\\n');\n            writeFileSync(configPath, content);\n            return { updated: true };\n        }\n\n        return { updated: false, error: 'Could not find @omnify alias to add @omnify-base after' };\n    } catch (error) {\n        return {\n            updated: false,\n            error: `Failed to add plugin enum alias: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n}\n\n/**\n * Add @omnify-base path to tsconfig.json for plugin enum imports.\n */\nexport function addPluginEnumTsconfigPath(rootDir: string): { updated: boolean; error?: string } {\n    const configPath = resolve(rootDir, 'tsconfig.json');\n    if (!existsSync(configPath)) {\n        return { updated: false };\n    }\n\n    try {\n        const content = readFileSync(configPath, 'utf-8');\n\n        // Check if already has @omnify-base path\n        if (content.includes('@omnify-base')) {\n            return { updated: false };\n        }\n\n        // Parse JSON with comments\n        const jsonContent = content.replace(/\\/\\*[\\s\\S]*?\\*\\/|\\/\\/.*/g, '');\n        const config = JSON.parse(jsonContent);\n\n        if (!config.compilerOptions) {\n            config.compilerOptions = {};\n        }\n        if (!config.compilerOptions.paths) {\n            config.compilerOptions.paths = {};\n        }\n\n        config.compilerOptions.paths['@omnify-base/*'] = ['./node_modules/@omnify-base/*'];\n\n        writeFileSync(configPath, JSON.stringify(config, null, 2));\n        return { updated: true };\n    } catch (error) {\n        return {\n            updated: false,\n            error: `Failed to add plugin enum tsconfig path: ${error instanceof Error ? error.message : String(error)}`,\n        };\n    }\n}\n","/**\n * @famgia/omnify-cli - Init Command\n *\n * Initializes a new omnify project with interactive configuration.\n */\n\nimport { existsSync, mkdirSync, writeFileSync } from 'node:fs';\nimport { resolve } from 'node:path';\nimport type { Command } from 'commander';\nimport { select, confirm, input } from '@inquirer/prompts';\nimport { logger } from '../output/logger.js';\nimport { configureOmnifyAlias } from '../config/alias-config.js';\n\n/**\n * Migration tool options.\n */\ntype MigrationTool = 'laravel' | 'prisma' | 'drizzle' | 'none';\n\n/**\n * Project configuration from prompts.\n */\ninterface ProjectConfig {\n  database: 'mysql' | 'postgres' | 'sqlite';\n  migrationTool: MigrationTool;\n  generateTypes: boolean;\n  migrationsPath: string;\n  typesPath: string;\n  schemasDir: string;\n}\n\n/**\n * Example schema file content.\n */\nconst EXAMPLE_SCHEMA = `# Example User schema\n# See https://github.com/famgia/omnify for documentation\n\nname: User\ndisplayName: User Account\nkind: object\n\nproperties:\n  email:\n    type: Email\n    unique: true\n    displayName: Email Address\n\n  name:\n    type: String\n    displayName: Full Name\n\n  bio:\n    type: Text\n    nullable: true\n    displayName: Biography\n\noptions:\n  timestamps: true\n  softDelete: true\n`;\n\n/**\n * Generates config file content based on project configuration.\n */\nfunction generateConfig(config: ProjectConfig): string {\n  const imports: string[] = [`import { defineConfig } from '@famgia/omnify';`];\n  const plugins: string[] = [];\n\n  // Add Laravel plugin\n  if (config.migrationTool === 'laravel') {\n    imports.push(`import laravel from '@famgia/omnify-laravel/plugin';`);\n    plugins.push(`    laravel({\n      migrationsPath: '${config.migrationsPath}',\n      typesPath: '${config.typesPath}',\n      singleFile: true,\n      generateMigrations: true,\n      generateTypes: ${config.generateTypes},\n    }),`);\n  }\n\n  // Prisma plugin (coming soon)\n  if (config.migrationTool === 'prisma') {\n    plugins.push(`    // Prisma plugin coming soon!\n    // prisma({ schemaPath: 'prisma/schema.prisma' }),`);\n  }\n\n  // Drizzle plugin (coming soon)\n  if (config.migrationTool === 'drizzle') {\n    plugins.push(`    // Drizzle plugin coming soon!\n    // drizzle({ schemaPath: 'src/db/schema.ts' }),`);\n  }\n\n  // TypeScript-only (no migration tool)\n  if (config.migrationTool === 'none' && config.generateTypes) {\n    imports.push(`import laravel from '@famgia/omnify-laravel/plugin';`);\n    plugins.push(`    laravel({\n      typesPath: '${config.typesPath}',\n      generateMigrations: false,\n      generateTypes: true,\n    }),`);\n  }\n\n  // Database URL examples\n  const dbUrlExamples: Record<string, string> = {\n    mysql: 'mysql://root:password@localhost:3306/omnify_dev',\n    postgres: 'postgres://postgres:password@localhost:5432/omnify_dev',\n    sqlite: 'sqlite://./omnify_dev.db',\n  };\n\n  return `${imports.join('\\n')}\n\nexport default defineConfig({\n  // Schema files location\n  schemasDir: '${config.schemasDir}',\n\n  // Lock file for tracking schema changes\n  lockFilePath: './omnify.lock',\n\n  // Database configuration\n  database: {\n    driver: '${config.database}',\n    // REQUIRED: Set your development database URL\n    // devUrl: '${dbUrlExamples[config.database]}',\n  },\n\n  // Generator plugins\n  plugins: [\n${plugins.join('\\n\\n')}\n  ],\n});\n`;\n}\n\n/**\n * Init command options.\n */\ninterface InitOptions {\n  force?: boolean;\n  yes?: boolean;\n}\n\n/**\n * Runs the init command with interactive prompts.\n */\nexport async function runInit(options: InitOptions): Promise<void> {\n  const cwd = process.cwd();\n\n  logger.header('Omnify Project Setup');\n  logger.newline();\n\n  // Check if config already exists\n  const configPath = resolve(cwd, 'omnify.config.ts');\n  if (existsSync(configPath) && !options.force) {\n    logger.warn('omnify.config.ts already exists. Use --force to overwrite.');\n    return;\n  }\n\n  let config: ProjectConfig;\n\n  if (options.yes) {\n    // Use defaults (Laravel)\n    config = {\n      database: 'mysql',\n      migrationTool: 'laravel',\n      generateTypes: true,\n      migrationsPath: 'database/migrations',\n      typesPath: 'resources/js/types',\n      schemasDir: './schemas',\n    };\n    logger.info('Using default configuration...');\n  } else {\n    // Interactive prompts\n    logger.info('Answer a few questions to configure your project:\\n');\n\n    // 1. Database selection\n    const database = await select({\n      message: 'Which database?',\n      choices: [\n        { name: 'MySQL / MariaDB', value: 'mysql' as const },\n        { name: 'PostgreSQL', value: 'postgres' as const },\n        { name: 'SQLite', value: 'sqlite' as const },\n      ],\n      default: 'mysql',\n    });\n\n    // 2. Migration tool selection\n    const migrationTool = await select({\n      message: 'Which migration tool?',\n      choices: [\n        { name: 'Laravel (PHP)', value: 'laravel' as const },\n        { name: 'Prisma (coming soon)', value: 'prisma' as const, disabled: true },\n        { name: 'Drizzle (coming soon)', value: 'drizzle' as const, disabled: true },\n        { name: 'None (types only)', value: 'none' as const },\n      ],\n      default: 'laravel',\n    });\n\n    // 3. TypeScript types\n    const generateTypes = await confirm({\n      message: 'Generate TypeScript types?',\n      default: true,\n    });\n\n    // Default paths based on migration tool\n    const defaultPaths: Record<MigrationTool, { migrations: string; types: string }> = {\n      laravel: { migrations: 'database/migrations', types: 'resources/js/types' },\n      prisma: { migrations: 'prisma/migrations', types: 'src/types' },\n      drizzle: { migrations: 'drizzle', types: 'src/types' },\n      none: { migrations: '', types: 'types' },\n    };\n\n    const defaults = defaultPaths[migrationTool];\n    let migrationsPath = defaults.migrations;\n    let typesPath = defaults.types;\n\n    if (migrationTool !== 'none') {\n      migrationsPath = await input({\n        message: 'Migrations output path:',\n        default: defaults.migrations,\n      });\n    }\n\n    if (generateTypes) {\n      typesPath = await input({\n        message: 'TypeScript types path:',\n        default: defaults.types,\n      });\n    }\n\n    // Schemas directory\n    const schemasDir = await input({\n      message: 'Schemas directory:',\n      default: './schemas',\n    });\n\n    config = {\n      database,\n      migrationTool,\n      generateTypes,\n      migrationsPath,\n      typesPath,\n      schemasDir,\n    };\n  }\n\n  logger.newline();\n  logger.step('Creating project files...');\n\n  // Create schemas directory\n  const schemasDir = resolve(cwd, config.schemasDir);\n  if (!existsSync(schemasDir)) {\n    mkdirSync(schemasDir, { recursive: true });\n    logger.debug(`Created ${config.schemasDir}/ directory`);\n  }\n\n  // Create example schema\n  const examplePath = resolve(schemasDir, 'User.yaml');\n  if (!existsSync(examplePath) || options.force) {\n    writeFileSync(examplePath, EXAMPLE_SCHEMA);\n    logger.debug('Created example schema: User.yaml');\n  }\n\n  // Create config file\n  const configContent = generateConfig(config);\n  writeFileSync(configPath, configContent);\n  logger.debug('Created omnify.config.ts');\n\n  // Auto-configure @omnify alias in vite.config and tsconfig.json\n  if (config.generateTypes) {\n    logger.step('Configuring @omnify path alias...');\n    const aliasResult = configureOmnifyAlias(cwd, 'omnify', false);\n    if (!aliasResult.viteUpdated && !aliasResult.tsconfigUpdated) {\n      if (!aliasResult.viteSkipped) {\n        logger.info('Note: vite.config not found - you may need to configure @omnify alias manually');\n      }\n      if (!aliasResult.tsconfigSkipped) {\n        logger.info('Note: tsconfig.json not found - you may need to configure @omnify/* path manually');\n      }\n    }\n  }\n\n  logger.newline();\n  logger.success('Project initialized!');\n  logger.newline();\n\n  // Summary\n  const toolName =\n    config.migrationTool === 'laravel'\n      ? 'Laravel'\n      : config.migrationTool === 'prisma'\n        ? 'Prisma'\n        : config.migrationTool === 'drizzle'\n          ? 'Drizzle'\n          : 'None';\n\n  logger.info('Configuration:');\n  logger.list([\n    `Database: ${config.database}`,\n    `Migration tool: ${toolName}`,\n    `TypeScript types: ${config.generateTypes ? 'Yes' : 'No'}`,\n  ]);\n\n  logger.newline();\n  logger.info('Files created:');\n  logger.list(['omnify.config.ts', `${config.schemasDir}/User.yaml`]);\n\n  logger.newline();\n  logger.info('Next steps:');\n  logger.newline();\n\n  logger.step('1. Set database URL in omnify.config.ts');\n  logger.newline();\n\n  logger.step('2. Define schemas in ' + config.schemasDir + '/');\n  logger.newline();\n\n  logger.step('3. Generate:');\n  logger.info('   npx omnify validate');\n  logger.info('   npx omnify generate');\n  logger.newline();\n}\n\n/**\n * Registers the init command.\n */\nexport function registerInitCommand(program: Command): void {\n  program\n    .command('init')\n    .description('Initialize a new omnify project')\n    .option('-f, --force', 'Overwrite existing files')\n    .option('-y, --yes', 'Use default configuration (skip prompts)')\n    .action(async (options: InitOptions) => {\n      try {\n        await runInit(options);\n      } catch (error) {\n        if (error instanceof Error) {\n          // Handle Ctrl+C gracefully\n          if (error.message.includes('User force closed')) {\n            logger.newline();\n            logger.info('Setup cancelled.');\n            process.exit(0);\n          }\n          logger.error(error.message);\n        }\n        process.exit(1);\n      }\n    });\n}\n","/**\n * @famgia/omnify-cli - Validate Command\n *\n * Validates schema files for syntax and semantic errors.\n */\n\nimport { existsSync } from 'node:fs';\nimport { resolve, dirname } from 'node:path';\nimport type { Command } from 'commander';\nimport { loadSchemas, mergePartialSchemas, validateSchemas, OmnifyError } from '@famgia/omnify-core';\nimport { loadConfig, validateConfig } from '../config/loader.js';\nimport { logger } from '../output/logger.js';\n\n/**\n * Validate command options.\n */\ninterface ValidateOptions {\n  verbose?: boolean;\n}\n\n/**\n * Runs the validate command.\n */\nexport async function runValidate(options: ValidateOptions): Promise<void> {\n  logger.setVerbose(options.verbose ?? false);\n\n  logger.header('Validating Schemas');\n\n  // Load configuration\n  logger.debug('Loading configuration...');\n  logger.timing('Config load start');\n  const { config, configPath } = await loadConfig();\n  logger.timing('Config loaded');\n\n  const rootDir = configPath ? dirname(configPath) : process.cwd();\n\n  // Validate config (checks schema directory exists)\n  validateConfig(config, rootDir);\n\n  // Load schemas from main directory\n  const schemaPath = resolve(rootDir, config.schemasDir);\n  logger.step(`Loading schemas from ${schemaPath}`);\n  logger.timing('Schema load start');\n\n  let schemas = await loadSchemas(schemaPath);\n  logger.debug(`Found ${Object.keys(schemas).length} schema(s) in main directory`);\n\n  // Load additional schemas from config\n  const additionalPaths = config.additionalSchemaPaths ?? [];\n  let hasPackageSchemas = false;\n\n  if (additionalPaths.length > 0) {\n    logger.step(`Loading schemas from ${additionalPaths.length} additional path(s)`);\n    for (const entry of additionalPaths) {\n      const absolutePath = resolve(rootDir, entry.path);\n      logger.debug(`  Checking: ${entry.path} → ${absolutePath}`);\n\n      if (existsSync(absolutePath)) {\n        const packageSchemas = await loadSchemas(absolutePath, { skipPartialResolution: true });\n        const count = Object.keys(packageSchemas).filter(k => !k.startsWith('__partial__')).length;\n        const partialCount = Object.keys(packageSchemas).filter(k => k.startsWith('__partial__')).length;\n        const nsInfo = entry.namespace ? ` [${entry.namespace}]` : '';\n        logger.info(`  • ${entry.path}${nsInfo}: ${count} schema(s)${partialCount > 0 ? ` + ${partialCount} partial(s)` : ''}`);\n        schemas = { ...packageSchemas, ...schemas };\n        hasPackageSchemas = true;\n      } else {\n        logger.warn(`  • ${entry.path}: directory not found (skipped)`);\n      }\n    }\n  }\n\n  // Resolve partial schemas from packages\n  if (hasPackageSchemas) {\n    schemas = mergePartialSchemas(schemas);\n  }\n\n  logger.timing('Schemas loaded');\n  const schemaCount = Object.keys(schemas).length;\n\n  if (schemaCount === 0) {\n    logger.warn('No schema files found');\n    return;\n  }\n\n  logger.debug(`Total: ${schemaCount} schema(s)`);\n\n  // Validate schemas\n  logger.step('Validating schemas...');\n  logger.timing('Validation start');\n\n  const result = validateSchemas(schemas);\n  logger.timing('Validation complete');\n\n  if (result.valid) {\n    logger.success(`All ${schemaCount} schema(s) are valid`);\n  } else {\n    logger.error(`Found ${result.errors.length} validation error(s)`);\n    logger.newline();\n\n    for (const error of result.errors) {\n      const omnifyError = OmnifyError.fromInfo(error);\n      logger.formatError(omnifyError);\n      logger.newline();\n    }\n\n    process.exit(2);\n  }\n}\n\n/**\n * Registers the validate command.\n */\nexport function registerValidateCommand(program: Command): void {\n  program\n    .command('validate')\n    .description('Validate schema files')\n    .option('-v, --verbose', 'Show detailed output')\n    .action(async (options: ValidateOptions) => {\n      try {\n        await runValidate(options);\n      } catch (error) {\n        if (error instanceof OmnifyError) {\n          logger.formatError(error);\n          process.exit(logger.getExitCode(error));\n        } else if (error instanceof Error) {\n          logger.error(error.message);\n          process.exit(1);\n        }\n        process.exit(1);\n      }\n    });\n}\n","/**\n * @famgia/omnify-cli - Diff Command\n *\n * Shows pending schema changes without generating migrations.\n */\n\nimport { existsSync } from 'node:fs';\nimport { resolve, dirname } from 'node:path';\nimport type { Command } from 'commander';\nimport { loadSchemas, mergePartialSchemas, validateSchemas, OmnifyError } from '@famgia/omnify-core';\nimport { loadConfig, validateConfig, requireDevUrl } from '../config/loader.js';\nimport { logger } from '../output/logger.js';\nimport { runDiffOperation } from '../operations/diff.js';\nimport pc from 'picocolors';\n\n/**\n * Diff command options.\n */\ninterface DiffOptions {\n  verbose?: boolean;\n  check?: boolean;\n}\n\n/**\n * Runs the diff command.\n */\nexport async function runDiff(options: DiffOptions): Promise<void> {\n  logger.setVerbose(options.verbose ?? false);\n\n  logger.header('Checking for Schema Changes');\n\n  // Load configuration\n  logger.debug('Loading configuration...');\n  const { config, configPath } = await loadConfig();\n  const rootDir = configPath ? dirname(configPath) : process.cwd();\n\n  // Validate config and require devUrl for diff\n  validateConfig(config, rootDir);\n  requireDevUrl(config);\n\n  // Load schemas from main directory\n  const schemaPath = resolve(rootDir, config.schemasDir);\n  logger.step(`Loading schemas from ${schemaPath}`);\n\n  let schemas = await loadSchemas(schemaPath);\n  logger.debug(`Found ${Object.keys(schemas).length} schema(s) in main directory`);\n\n  // Load additional schemas from config\n  const additionalPaths = config.additionalSchemaPaths ?? [];\n  let hasPackageSchemas = false;\n\n  if (additionalPaths.length > 0) {\n    logger.step(`Loading schemas from ${additionalPaths.length} additional path(s)`);\n    for (const entry of additionalPaths) {\n      const absolutePath = resolve(rootDir, entry.path);\n      logger.debug(`  Checking: ${entry.path} → ${absolutePath}`);\n\n      if (existsSync(absolutePath)) {\n        const packageSchemas = await loadSchemas(absolutePath, { skipPartialResolution: true });\n        const count = Object.keys(packageSchemas).filter(k => !k.startsWith('__partial__')).length;\n        const partialCount = Object.keys(packageSchemas).filter(k => k.startsWith('__partial__')).length;\n        const nsInfo = entry.namespace ? ` [${entry.namespace}]` : '';\n        logger.info(`  • ${entry.path}${nsInfo}: ${count} schema(s)${partialCount > 0 ? ` + ${partialCount} partial(s)` : ''}`);\n        schemas = { ...packageSchemas, ...schemas };\n        hasPackageSchemas = true;\n      } else {\n        logger.warn(`  • ${entry.path}: directory not found (skipped)`);\n      }\n    }\n  }\n\n  // Resolve partial schemas from packages\n  if (hasPackageSchemas) {\n    schemas = mergePartialSchemas(schemas);\n  }\n\n  const schemaCount = Object.keys(schemas).length;\n\n  if (schemaCount === 0) {\n    logger.warn('No schema files found');\n    return;\n  }\n\n  logger.debug(`Total: ${schemaCount} schema(s)`);\n\n  // Validate schemas first\n  logger.step('Validating schemas...');\n  const validationResult = validateSchemas(schemas);\n\n  if (!validationResult.valid) {\n    logger.error('Schema validation failed. Fix errors before running diff.');\n    for (const error of validationResult.errors) {\n      const omnifyError = OmnifyError.fromInfo(error);\n      logger.formatError(omnifyError);\n    }\n    process.exit(2);\n  }\n\n  // Run diff operation\n  logger.step('Running Atlas diff...');\n  const lockPath = resolve(rootDir, config.lockFilePath);\n\n  const diffResult = await runDiffOperation({\n    schemas,\n    devUrl: config.database.devUrl!,\n    lockFilePath: lockPath,\n    driver: config.database.driver,\n    workDir: rootDir,\n  });\n\n  if (!diffResult.hasChanges) {\n    logger.success('No changes detected');\n    return;\n  }\n\n  // Show changes preview\n  logger.newline();\n  console.log(pc.bold('Changes detected:'));\n  console.log();\n  console.log(diffResult.formattedPreview);\n\n  if (diffResult.hasDestructiveChanges) {\n    logger.newline();\n    logger.warn('This preview contains destructive changes. Review carefully.');\n  }\n\n  // Check mode: exit with code 1 if changes exist\n  if (options.check) {\n    logger.newline();\n    logger.info('Changes detected (--check mode)');\n    process.exit(1);\n  }\n\n  logger.newline();\n  logger.info('Run \"omnify generate\" to create migrations');\n}\n\n/**\n * Registers the diff command.\n */\nexport function registerDiffCommand(program: Command): void {\n  program\n    .command('diff')\n    .description('Show pending schema changes')\n    .option('-v, --verbose', 'Show detailed output')\n    .option('--check', 'Exit with code 1 if changes exist (for CI)')\n    .action(async (options: DiffOptions) => {\n      try {\n        await runDiff(options);\n      } catch (error) {\n        if (error instanceof OmnifyError) {\n          logger.formatError(error);\n          process.exit(logger.getExitCode(error));\n        } else if (error instanceof Error) {\n          logger.error(error.message);\n          process.exit(1);\n        }\n        process.exit(1);\n      }\n    });\n}\n","/**\n * @famgia/omnify-cli - Diff Operations\n *\n * High-level diff operations combining atlas-adapter functions.\n */\n\nimport type { SchemaCollection, DatabaseDriver } from '@famgia/omnify-types';\nimport {\n  generatePreview,\n  formatPreview,\n  type ChangePreview,\n} from '@famgia/omnify-atlas';\n\n/**\n * Options for running diff.\n */\nexport interface RunDiffOptions {\n  schemas: SchemaCollection;\n  devUrl: string;\n  lockFilePath: string;\n  driver: DatabaseDriver;\n  workDir: string;\n}\n\n/**\n * Result of diff operation.\n */\nexport interface DiffOperationResult {\n  hasChanges: boolean;\n  hasDestructiveChanges: boolean;\n  preview: ChangePreview;\n  formattedPreview: string;\n  sql: string;\n}\n\n/**\n * Runs a full diff operation.\n */\nexport async function runDiffOperation(options: RunDiffOptions): Promise<DiffOperationResult> {\n  const { schemas, devUrl, driver, workDir } = options;\n\n  // Generate preview using atlas-adapter\n  const preview = await generatePreview(schemas, {\n    driver,\n    devUrl,\n    workDir,\n  }, {\n    warnDestructive: true,\n    showSql: true,\n  });\n\n  // Format preview for display\n  const formattedPreview = formatPreview(preview, 'text');\n\n  return {\n    hasChanges: preview.hasChanges,\n    hasDestructiveChanges: preview.hasDestructiveChanges,\n    preview,\n    formattedPreview,\n    sql: preview.sql,\n  };\n}\n\n/**\n * Re-export for convenience.\n */\nexport { formatPreview };\n","/**\n * @famgia/omnify-cli - Generate Command\n *\n * Generates Laravel migrations and TypeScript types from schemas.\n * Supports both direct generation and plugin-based generation.\n */\n\nimport { existsSync, mkdirSync, writeFileSync, readdirSync } from 'node:fs';\nimport { resolve, dirname, relative } from 'node:path';\nimport type { Command } from 'commander';\nimport {\n  loadSchemas,\n  mergePartialSchemas,\n  validateSchemas,\n  OmnifyError,\n  PluginManager,\n  createVersionStore,\n  type VersionSchemaSnapshot,\n  type VersionPropertySnapshot,\n  type VersionChange,\n} from '@famgia/omnify-core';\nimport type { LoadedSchema } from '@famgia/omnify-types';\nimport {\n  writeLockFile,\n  readLockFile,\n  updateLockFile,\n  buildSchemaSnapshots,\n  compareSchemasDeep,\n  isLockFileV2,\n  validateMigrations,\n  getMigrationsToRegenerate,\n  VERSION_CHAIN_FILE,\n  readVersionChain,\n  checkBulkLockViolation,\n  type SchemaChange,\n  type MigrationValidation,\n} from '@famgia/omnify-atlas';\nimport {\n  generateMigrations,\n  generateMigrationsFromChanges,\n  generateModels,\n  getModelPath,\n  generateFactories,\n  getFactoryPath,\n} from '@famgia/omnify-laravel';\nimport { generateTypeScript, generateAIGuides as generateTypescriptAIGuides, shouldGenerateAIGuides as shouldGenerateTypescriptAIGuides } from '@famgia/omnify-typescript';\nimport type {\n  OmnifyPlugin,\n  SchemaCollection,\n  GeneratorOutput,\n} from '@famgia/omnify-types';\nimport type { ResolvedOmnifyConfig } from '../config/types.js';\nimport { loadConfig, validateConfig } from '../config/loader.js';\nimport { configureOmnifyAlias, addPluginEnumAlias, addPluginEnumTsconfigPath } from '../config/alias-config.js';\nimport { logger } from '../output/logger.js';\nimport { generateAIGuides } from '../guides/index.js';\n\n/**\n * Generate command options.\n */\ninterface GenerateOptions {\n  verbose?: boolean;\n  migrationsOnly?: boolean;\n  typesOnly?: boolean;\n  force?: boolean;\n  /** CI mode: check if migrations are in sync without generating */\n  check?: boolean;\n  /** Show stale migration warnings */\n  warnStale?: boolean;\n}\n\n\n/**\n * Checks if plugins have generators configured.\n */\nfunction hasPluginGenerators(plugins: readonly OmnifyPlugin[]): boolean {\n  return plugins.some((p) => p.generators && p.generators.length > 0);\n}\n\n/**\n * Scans a directory for existing migration files and returns tables that already have CREATE migrations.\n */\nfunction getExistingMigrationTables(migrationsDir: string): Set<string> {\n  const existingTables = new Set<string>();\n\n  if (!existsSync(migrationsDir)) {\n    return existingTables;\n  }\n\n  try {\n    const files = readdirSync(migrationsDir);\n    // Match pattern: YYYY_MM_DD_HHMMSS_create_<table>_table.php\n    const createMigrationPattern = /^\\d{4}_\\d{2}_\\d{2}_\\d{6}_create_(.+)_table\\.php$/;\n\n    for (const file of files) {\n      const match = file.match(createMigrationPattern);\n      if (match) {\n        existingTables.add(match[1]); // table name\n      }\n    }\n  } catch {\n    // Ignore errors reading directory\n  }\n\n  return existingTables;\n}\n\n/**\n * Logs detailed schema change information.\n */\nfunction logSchemaChange(change: SchemaChange, verbose: boolean): void {\n  logger.debug(`  ${change.changeType}: ${change.schemaName}`);\n\n  if (!verbose || change.changeType !== 'modified') {\n    return;\n  }\n\n  // Log column changes\n  if (change.columnChanges) {\n    for (const col of change.columnChanges) {\n      if (col.changeType === 'added') {\n        logger.debug(`    + column: ${col.column} (${col.currentDef?.type})`);\n      } else if (col.changeType === 'removed') {\n        logger.debug(`    - column: ${col.column}`);\n      } else if (col.changeType === 'modified' && col.modifications) {\n        logger.debug(`    ~ column: ${col.column} [${col.modifications.join(', ')}]`);\n      } else if (col.changeType === 'renamed' && col.previousColumn) {\n        const mods = col.modifications?.length ? ` [${col.modifications.join(', ')}]` : '';\n        logger.debug(`    → column: ${col.previousColumn} → ${col.column}${mods}`);\n      }\n    }\n  }\n\n  // Log index changes\n  if (change.indexChanges) {\n    for (const idx of change.indexChanges) {\n      const type = idx.index.unique ? 'unique' : 'index';\n      if (idx.changeType === 'added') {\n        logger.debug(`    + ${type}: (${idx.index.columns.join(', ')})`);\n      } else {\n        logger.debug(`    - ${type}: (${idx.index.columns.join(', ')})`);\n      }\n    }\n  }\n\n  // Log option changes\n  if (change.optionChanges) {\n    if (change.optionChanges.timestamps) {\n      const { from, to } = change.optionChanges.timestamps;\n      logger.debug(`    ~ timestamps: ${from} → ${to}`);\n    }\n    if (change.optionChanges.softDelete) {\n      const { from, to } = change.optionChanges.softDelete;\n      logger.debug(`    ~ softDelete: ${from} → ${to}`);\n    }\n    if (change.optionChanges.idType) {\n      const { from, to } = change.optionChanges.idType;\n      logger.debug(`    ~ idType: ${from} → ${to}`);\n    }\n  }\n}\n\n/**\n * Convert property to version snapshot format.\n */\nfunction propertyToVersionSnapshot(prop: Record<string, unknown>): VersionPropertySnapshot {\n  return {\n    type: prop.type as string,\n    ...(prop.displayName !== undefined && { displayName: prop.displayName as string }),\n    ...(prop.description !== undefined && { description: prop.description as string }),\n    ...(prop.nullable !== undefined && { nullable: prop.nullable as boolean }),\n    ...(prop.unique !== undefined && { unique: prop.unique as boolean }),\n    ...(prop.default !== undefined && { default: prop.default }),\n    ...(prop.length !== undefined && { length: prop.length as number }),\n    ...(prop.unsigned !== undefined && { unsigned: prop.unsigned as boolean }),\n    ...(prop.precision !== undefined && { precision: prop.precision as number }),\n    ...(prop.scale !== undefined && { scale: prop.scale as number }),\n    ...(prop.enum !== undefined && { enum: prop.enum as readonly string[] }),\n    ...(prop.relation !== undefined && { relation: prop.relation as string }),\n    ...(prop.target !== undefined && { target: prop.target as string }),\n    ...(prop.targets !== undefined && { targets: prop.targets as readonly string[] }),\n    ...(prop.morphName !== undefined && { morphName: prop.morphName as string }),\n    ...(prop.onDelete !== undefined && { onDelete: prop.onDelete as string }),\n    ...(prop.onUpdate !== undefined && { onUpdate: prop.onUpdate as string }),\n    ...(prop.mappedBy !== undefined && { mappedBy: prop.mappedBy as string }),\n    ...(prop.inversedBy !== undefined && { inversedBy: prop.inversedBy as string }),\n    ...(prop.joinTable !== undefined && { joinTable: prop.joinTable as string }),\n    ...(prop.owning !== undefined && { owning: prop.owning as boolean }),\n    // Laravel-specific properties\n    ...(prop.hidden !== undefined && { hidden: prop.hidden as boolean }),\n    ...(prop.fillable !== undefined && { fillable: prop.fillable as boolean }),\n    // Per-field overrides for compound types\n    ...(prop.fields !== undefined && { fields: prop.fields as Record<string, { nullable?: boolean; hidden?: boolean; fillable?: boolean }> }),\n  };\n}\n\n/**\n * Convert schemas to version snapshot format.\n */\nfunction schemasToVersionSnapshot(\n  schemas: SchemaCollection\n): Record<string, VersionSchemaSnapshot> {\n  const snapshot: Record<string, VersionSchemaSnapshot> = {};\n\n  for (const [name, schema] of Object.entries(schemas)) {\n    const properties: Record<string, VersionPropertySnapshot> = {};\n    if (schema.properties) {\n      for (const [propName, prop] of Object.entries(schema.properties)) {\n        properties[propName] = propertyToVersionSnapshot(prop as unknown as Record<string, unknown>);\n      }\n    }\n\n    const opts = schema.options;\n    snapshot[name] = {\n      name: schema.name,\n      kind: (schema.kind ?? 'object') as 'object' | 'enum',\n      ...(Object.keys(properties).length > 0 && { properties }),\n      ...(schema.values && { values: schema.values }),\n      ...(opts && {\n        options: {\n          ...(opts.id !== undefined && { id: opts.id }),\n          ...(opts.idType !== undefined && { idType: opts.idType }),\n          ...(opts.timestamps !== undefined && { timestamps: opts.timestamps }),\n          ...(opts.softDelete !== undefined && { softDelete: opts.softDelete }),\n          ...(opts.tableName !== undefined && { tableName: opts.tableName }),\n          ...(opts.translations !== undefined && { translations: opts.translations }),\n          ...(opts.authenticatable !== undefined && { authenticatable: opts.authenticatable }),\n        },\n      }),\n    };\n  }\n\n  return snapshot;\n}\n\n/**\n * Convert SchemaChange to VersionChange format.\n */\nfunction schemaChangeToVersionChange(change: SchemaChange): VersionChange[] {\n  const changes: VersionChange[] = [];\n\n  if (change.changeType === 'added') {\n    changes.push({ action: 'schema_added', schema: change.schemaName });\n  } else if (change.changeType === 'removed') {\n    changes.push({ action: 'schema_removed', schema: change.schemaName });\n  } else if (change.changeType === 'modified') {\n    // Add property-level changes\n    if (change.columnChanges) {\n      for (const col of change.columnChanges) {\n        if (col.changeType === 'added') {\n          changes.push({\n            action: 'property_added',\n            schema: change.schemaName,\n            property: col.column,\n            to: col.currentDef,\n          });\n        } else if (col.changeType === 'removed') {\n          changes.push({\n            action: 'property_removed',\n            schema: change.schemaName,\n            property: col.column,\n            from: col.previousDef,\n          });\n        } else if (col.changeType === 'modified') {\n          changes.push({\n            action: 'property_modified',\n            schema: change.schemaName,\n            property: col.column,\n            from: col.previousDef,\n            to: col.currentDef,\n          });\n        } else if (col.changeType === 'renamed') {\n          changes.push({\n            action: 'property_renamed',\n            schema: change.schemaName,\n            property: col.column,\n            from: col.previousColumn,\n            to: col.column,\n          });\n        }\n      }\n    }\n\n    // Add option changes\n    if (change.optionChanges) {\n      changes.push({\n        action: 'option_changed',\n        schema: change.schemaName,\n        from: change.optionChanges,\n        to: change.optionChanges,\n      });\n    }\n\n    // Add index changes\n    if (change.indexChanges) {\n      for (const idx of change.indexChanges) {\n        if (idx.changeType === 'added') {\n          changes.push({\n            action: 'index_added',\n            schema: change.schemaName,\n            to: idx.index,\n          });\n        } else {\n          changes.push({\n            action: 'index_removed',\n            schema: change.schemaName,\n            from: idx.index,\n          });\n        }\n      }\n    }\n  }\n\n  return changes;\n}\n\n/**\n * Writes generator outputs to disk.\n */\nfunction writeGeneratorOutputs(\n  outputs: readonly GeneratorOutput[],\n  rootDir: string\n): { migrations: number; types: number; models: number; factories: number; other: number } {\n  const counts = { migrations: 0, types: 0, models: 0, factories: 0, other: 0 };\n\n  for (const output of outputs) {\n    const filePath = resolve(rootDir, output.path);\n    const dir = dirname(filePath);\n\n    if (!existsSync(dir)) {\n      mkdirSync(dir, { recursive: true });\n      logger.debug(`Created directory: ${dir}`);\n    }\n\n    // Skip writing if file exists and skipIfExists is true\n    if (output.skipIfExists && existsSync(filePath)) {\n      logger.debug(`Skipped (exists): ${output.path}`);\n      continue;\n    }\n\n    writeFileSync(filePath, output.content);\n    logger.debug(`Created: ${output.path}`);\n\n    if (output.type === 'migration') counts.migrations++;\n    else if (output.type === 'type') counts.types++;\n    else if (output.type === 'model') counts.models++;\n    else if (output.type === 'factory') counts.factories++;\n    else counts.other++;\n  }\n\n  return counts;\n}\n\n/**\n * Runs generation using the plugin system.\n */\nasync function runPluginGeneration(\n  plugins: readonly OmnifyPlugin[],\n  schemas: SchemaCollection,\n  rootDir: string,\n  verbose: boolean,\n  changes?: readonly SchemaChange[]\n): Promise<{ migrations: number; types: number; models: number; factories: number; other: number }> {\n  const pluginManager = new PluginManager({\n    cwd: rootDir,\n    verbose,\n    logger: {\n      debug: (msg) => logger.debug(msg),\n      info: (msg) => logger.info(msg),\n      warn: (msg) => logger.warn(msg),\n      error: (msg) => logger.error(msg),\n    },\n  });\n\n  // Register plugins\n  for (const plugin of plugins) {\n    await pluginManager.register(plugin);\n  }\n\n  // Run generators with schema changes\n  const result = await pluginManager.runGenerators(schemas, changes);\n\n  if (!result.success) {\n    for (const error of result.errors) {\n      logger.error(`Generator ${error.generatorName} failed: ${error.message}`);\n    }\n    throw new Error('Generator execution failed');\n  }\n\n  // Write outputs\n  return writeGeneratorOutputs(result.outputs, rootDir);\n}\n\n/**\n * Runs generation using direct function calls (legacy mode).\n */\nfunction runDirectGeneration(\n  schemas: SchemaCollection,\n  config: ResolvedOmnifyConfig,\n  rootDir: string,\n  options: GenerateOptions,\n  changes: readonly SchemaChange[]\n): { migrations: number; types: number; models: number; factories: number } {\n  let migrationsGenerated = 0;\n  let typesGenerated = 0;\n  let modelsGenerated = 0;\n  let factoriesGenerated = 0;\n\n  // Extract custom types from plugins for generators\n  const customTypesMap = new Map<string, import('@famgia/omnify-types').CustomTypeDefinition>();\n  for (const plugin of config.plugins) {\n    if (plugin.types) {\n      for (const typeDef of plugin.types) {\n        customTypesMap.set(typeDef.name, typeDef);\n      }\n    }\n  }\n\n  // Extract plugin enums for TypeScript generation\n  const pluginEnumsMap = new Map<string, import('@famgia/omnify-types').PluginEnumDefinition>();\n  for (const plugin of config.plugins) {\n    if (plugin.enums) {\n      for (const enumDef of plugin.enums) {\n        pluginEnumsMap.set(enumDef.name, enumDef);\n      }\n    }\n  }\n\n  // Generate Laravel migrations\n  if (!options.typesOnly && config.output.laravel) {\n    logger.step('Generating Laravel migrations...');\n\n    const migrationsDir = resolve(rootDir, config.output.laravel.migrationsPath);\n    if (!existsSync(migrationsDir)) {\n      mkdirSync(migrationsDir, { recursive: true });\n      logger.debug(`Created directory: ${migrationsDir}`);\n    }\n\n    // Separate added schemas from modified/removed\n    const addedSchemaNames = new Set(\n      changes.filter((c) => c.changeType === 'added').map((c) => c.schemaName)\n    );\n    const alterChanges = changes.filter(\n      (c) => c.changeType === 'modified' || c.changeType === 'removed'\n    );\n\n    // Get existing migration tables to avoid duplicates\n    const existingTables = getExistingMigrationTables(migrationsDir);\n\n    // Generate CREATE migrations only for added schemas\n    if (addedSchemaNames.size > 0) {\n      const addedSchemas = Object.fromEntries(\n        Object.entries(schemas).filter(([name]) => addedSchemaNames.has(name))\n      ) as SchemaCollection;\n\n      const createMigrations = generateMigrations(addedSchemas, { customTypes: customTypesMap });\n      for (const migration of createMigrations) {\n        const tableName = migration.tables[0];\n        // Skip if table already has a create migration\n        if (existingTables.has(tableName)) {\n          logger.debug(`Skipped CREATE for ${tableName} (already exists)`);\n          continue;\n        }\n        const filePath = resolve(migrationsDir, migration.fileName);\n        writeFileSync(filePath, migration.content);\n        logger.debug(`Created: ${migration.fileName}`);\n        migrationsGenerated++;\n      }\n    }\n\n    // Generate ALTER/DROP migrations for modified/removed schemas\n    if (alterChanges.length > 0) {\n      const alterMigrations = generateMigrationsFromChanges(alterChanges);\n      for (const migration of alterMigrations) {\n        const filePath = resolve(migrationsDir, migration.fileName);\n        writeFileSync(filePath, migration.content);\n        logger.debug(`Created: ${migration.fileName}`);\n        migrationsGenerated++;\n      }\n    }\n\n    logger.success(`Generated ${migrationsGenerated} migration(s)`);\n  }\n\n  // Generate Laravel models\n  if (!options.typesOnly && config.output.laravel?.modelsPath) {\n    logger.step('Generating Laravel models...');\n\n    const modelsPath = config.output.laravel.modelsPath;\n    const baseModelsPath = config.output.laravel.baseModelsPath ?? `${modelsPath}/OmnifyBase`;\n\n    // Ensure directories exist\n    const modelsDir = resolve(rootDir, modelsPath);\n    const baseModelsDir = resolve(rootDir, baseModelsPath);\n    if (!existsSync(modelsDir)) {\n      mkdirSync(modelsDir, { recursive: true });\n    }\n    if (!existsSync(baseModelsDir)) {\n      mkdirSync(baseModelsDir, { recursive: true });\n    }\n\n    const providersPath = config.output.laravel.providersPath ?? 'app/Providers';\n\n    const models = generateModels(schemas, {\n      modelPath: modelsPath,\n      baseModelPath: baseModelsPath,\n      providersPath: providersPath,\n      customTypes: customTypesMap,\n    });\n\n    for (const model of models) {\n      const filePath = resolve(rootDir, getModelPath(model));\n      const fileDir = dirname(filePath);\n      if (!existsSync(fileDir)) {\n        mkdirSync(fileDir, { recursive: true });\n      }\n\n      // Skip user models if they exist (don't overwrite customizations)\n      // Always overwrite base models (overwrite: true)\n      if (!model.overwrite && existsSync(filePath)) {\n        logger.debug(`Skipped (exists): ${getModelPath(model)}`);\n        continue;\n      }\n\n      writeFileSync(filePath, model.content);\n      logger.debug(`Created: ${getModelPath(model)}`);\n      modelsGenerated++;\n    }\n\n    logger.success(`Generated ${modelsGenerated} model(s)`);\n  }\n\n  // Generate Laravel factories\n  if (!options.typesOnly && config.output.laravel?.factoriesPath) {\n    logger.step('Generating Laravel factories...');\n\n    const factoriesPath = config.output.laravel.factoriesPath;\n    const factoriesDir = resolve(rootDir, factoriesPath);\n    if (!existsSync(factoriesDir)) {\n      mkdirSync(factoriesDir, { recursive: true });\n    }\n\n    const factories = generateFactories(schemas, {\n      factoryPath: factoriesPath,\n    });\n\n    for (const factory of factories) {\n      const filePath = resolve(rootDir, getFactoryPath(factory));\n      const fileDir = dirname(filePath);\n      if (!existsSync(fileDir)) {\n        mkdirSync(fileDir, { recursive: true });\n      }\n\n      // Skip user factories if they exist (don't overwrite customizations)\n      if (!factory.overwrite && existsSync(filePath)) {\n        logger.debug(`Skipped (exists): ${getFactoryPath(factory)}`);\n        continue;\n      }\n\n      writeFileSync(filePath, factory.content);\n      logger.debug(`Created: ${getFactoryPath(factory)}`);\n      factoriesGenerated++;\n    }\n\n    logger.success(`Generated ${factoriesGenerated} factory(ies)`);\n  }\n\n  // Generate TypeScript types\n  if (!options.migrationsOnly && config.output.typescript) {\n    logger.step('Generating TypeScript types...');\n\n    const tsConfig = config.output.typescript as {\n      path: string;\n      schemasDir?: string;\n      enumDir?: string;\n      generateRules?: boolean;\n      validationTemplates?: Record<string, Record<string, string>>;\n    };\n\n    // Resolve paths: basePath + subdirectories\n    const basePath = resolve(rootDir, tsConfig.path);\n    const schemasDir = resolve(basePath, tsConfig.schemasDir ?? 'schemas');\n    const enumDir = resolve(basePath, tsConfig.enumDir ?? 'enum');\n\n    // Generated files go to node_modules/@omnify-base (auto-generated)\n    const omnifyBaseDir = resolve(rootDir, 'node_modules/@omnify-base');\n    const pluginEnumDir = resolve(omnifyBaseDir, 'enum');\n    const baseSchemasDir = resolve(omnifyBaseDir, 'schemas');\n\n    // Calculate enum import prefix (relative path from schemas to enum)\n    const enumImportPrefix = relative(schemasDir, enumDir).replace(/\\\\/g, '/');\n\n    // Create directories\n    if (!existsSync(schemasDir)) {\n      mkdirSync(schemasDir, { recursive: true });\n      logger.debug(`Created directory: ${schemasDir}`);\n    }\n    if (!existsSync(enumDir)) {\n      mkdirSync(enumDir, { recursive: true });\n      logger.debug(`Created directory: ${enumDir}`);\n    }\n    if (!existsSync(pluginEnumDir)) {\n      mkdirSync(pluginEnumDir, { recursive: true });\n      logger.debug(`Created directory: ${pluginEnumDir}`);\n    }\n    if (!existsSync(baseSchemasDir)) {\n      mkdirSync(baseSchemasDir, { recursive: true });\n      logger.debug(`Created directory: ${baseSchemasDir}`);\n    }\n\n    // Create package.json for @omnify-base package\n    const omnifyPkgJson = resolve(omnifyBaseDir, 'package.json');\n    if (!existsSync(omnifyPkgJson)) {\n      writeFileSync(omnifyPkgJson, JSON.stringify({\n        name: '@omnify-base',\n        version: '0.0.0',\n        private: true,\n        exports: {\n          './enum/*': './enum/*.js',\n          './schemas/*': './schemas/*.js',\n        },\n      }, null, 2));\n    }\n\n    // Enable multiLocale if locale config has multiple locales\n    const isMultiLocale = config.locale && config.locale.locales && config.locale.locales.length > 1;\n    const typeFiles = generateTypeScript(schemas, {\n      customTypes: customTypesMap,\n      pluginEnums: pluginEnumsMap,\n      localeConfig: config.locale,\n      multiLocale: isMultiLocale,\n      generateRules: tsConfig.generateRules ?? true,\n      validationTemplates: tsConfig.validationTemplates,\n      enumImportPrefix,\n      pluginEnumImportPrefix: '@omnify-base/enum',\n      baseImportPrefix: '@omnify-base/schemas',\n      schemaEnumImportPrefix: '@omnify/enum', // Absolute path for node_modules base files\n    });\n\n    for (const file of typeFiles) {\n      // Determine output directory based on file category\n      let outputDir: string;\n      let outputFilePath = file.filePath;\n\n      if (file.category === 'plugin-enum') {\n        outputDir = pluginEnumDir;\n      } else if (file.category === 'base') {\n        // Base files go to node_modules/@omnify-base/schemas/\n        outputDir = baseSchemasDir;\n        // Remove 'base/' prefix from filePath since we're already in schemas/\n        outputFilePath = file.filePath.replace(/^base\\//, '');\n      } else if (file.category === 'enum') {\n        outputDir = enumDir;\n      } else {\n        outputDir = schemasDir;\n      }\n      const filePath = resolve(outputDir, outputFilePath);\n      const fileDir = dirname(filePath);\n      if (!existsSync(fileDir)) {\n        mkdirSync(fileDir, { recursive: true });\n      }\n      // Skip if file exists and shouldn't be overwritten\n      if (!file.overwrite && existsSync(filePath)) {\n        logger.debug(`Skipped (exists): ${file.filePath}`);\n        continue;\n      }\n      writeFileSync(filePath, file.content);\n      logger.debug(`Created: ${file.filePath}`);\n      typesGenerated++;\n    }\n\n    logger.success(`Generated ${typesGenerated} TypeScript file(s)`);\n\n    // Auto-configure @omnify alias (silent mode - only log if changes made)\n    const aliasResult = configureOmnifyAlias(rootDir, tsConfig.path, true);\n    if (aliasResult.viteUpdated) {\n      logger.success('Auto-configured @omnify alias in vite.config');\n    }\n    if (aliasResult.tsconfigUpdated) {\n      logger.success('Auto-configured @omnify/* path in tsconfig.json');\n    }\n\n    // Configure @omnify-base alias (always needed for base schemas, enums, common, i18n)\n    const pluginAliasResult = addPluginEnumAlias(rootDir);\n    if (pluginAliasResult.updated) {\n      logger.success('Auto-configured @omnify-base alias in vite.config');\n    }\n    const pluginPathResult = addPluginEnumTsconfigPath(rootDir);\n    if (pluginPathResult.updated) {\n      logger.success('Auto-configured @omnify-base/* path in tsconfig.json');\n    }\n  }\n\n  return { migrations: migrationsGenerated, types: typesGenerated, models: modelsGenerated, factories: factoriesGenerated };\n}\n\n/**\n * Runs the generate command.\n */\nexport async function runGenerate(options: GenerateOptions): Promise<void> {\n  logger.setVerbose(options.verbose ?? false);\n\n  logger.header('Generating Outputs');\n\n  // Load configuration\n  logger.debug('Loading configuration...');\n  const { config, configPath } = await loadConfig();\n  const rootDir = configPath ? dirname(configPath) : process.cwd();\n\n  // Validate config (devUrl not required for generate)\n  validateConfig(config, rootDir);\n\n  // Load schemas from main directory\n  const schemaPath = resolve(rootDir, config.schemasDir);\n  logger.step(`Loading schemas from ${schemaPath}`);\n\n  let schemas = await loadSchemas(schemaPath);\n  logger.debug(`Found ${Object.keys(schemas).length} schema(s) in main directory`);\n\n  // Load additional schemas from config (additionalSchemaPaths)\n  // Includes auto-discovered packages from .omnify-packages.json\n  const additionalPaths = config.additionalSchemaPaths ?? [];\n  let hasPackageSchemas = false;\n\n  if (additionalPaths.length > 0) {\n    logger.step(`Loading schemas from ${additionalPaths.length} additional path(s)`);\n    for (const entry of additionalPaths) {\n      // Resolve relative path from rootDir\n      const absolutePath = resolve(rootDir, entry.path);\n      logger.debug(`  Checking: ${entry.path} → ${absolutePath}`);\n\n      if (existsSync(absolutePath)) {\n        // Load package schemas with skipPartialResolution to defer resolution\n        // This allows partials to target schemas from main directory\n        let packageSchemas = await loadSchemas(absolutePath, { skipPartialResolution: true });\n\n        // パッケージ出力設定がある場合、各スキーマにpackageOutputを付与\n        if (entry.output) {\n          const schemasWithOutput: Record<string, LoadedSchema> = {};\n          for (const [name, schema] of Object.entries(packageSchemas)) {\n            schemasWithOutput[name] = {\n              ...schema,\n              packageOutput: entry.output,\n            };\n          }\n          packageSchemas = schemasWithOutput;\n        }\n\n        const count = Object.keys(packageSchemas).filter(k => !k.startsWith('__partial__')).length;\n        const partialCount = Object.keys(packageSchemas).filter(k => k.startsWith('__partial__')).length;\n        const nsInfo = entry.namespace ? ` [${entry.namespace}]` : '';\n        const outputInfo = entry.output?.laravel ? ` → ${entry.output.laravel.base}` : '';\n        logger.info(`  • ${entry.path}${nsInfo}: ${count} schema(s)${partialCount > 0 ? ` + ${partialCount} partial(s)` : ''}${outputInfo}`);\n        // Merge schemas (package schemas won't override main schemas)\n        schemas = { ...packageSchemas, ...schemas };\n        hasPackageSchemas = true;\n      } else {\n        logger.warn(`  • ${entry.path}: directory not found (skipped)`);\n        logger.debug(`    Resolved path: ${absolutePath}`);\n      }\n    }\n  }\n\n  // Resolve partial schemas from packages now that all schemas are merged\n  if (hasPackageSchemas) {\n    schemas = mergePartialSchemas(schemas);\n  }\n\n  const schemaCount = Object.keys(schemas).length;\n\n  if (schemaCount === 0) {\n    logger.warn('No schema files found');\n    return;\n  }\n\n  logger.debug(`Total: ${schemaCount} schema(s)`);\n\n  // Extract custom type names from plugins for validation\n  const customTypeNames: string[] = [];\n  for (const plugin of config.plugins) {\n    if (plugin.types) {\n      for (const typeDef of plugin.types) {\n        customTypeNames.push(typeDef.name);\n      }\n    }\n  }\n\n  // Validate schemas first\n  logger.step('Validating schemas...');\n  const validationResult = validateSchemas(schemas, {\n    customTypes: customTypeNames,\n  });\n\n  if (!validationResult.valid) {\n    logger.error('Schema validation failed. Fix errors before generating.');\n    for (const error of validationResult.errors) {\n      const omnifyError = OmnifyError.fromInfo(error);\n      logger.formatError(omnifyError);\n    }\n    process.exit(2);\n  }\n\n  // Check for changes by comparing lock file with current schemas\n  logger.step('Checking for changes...');\n  const lockPath = resolve(rootDir, config.lockFilePath);\n\n  const existingLock = await readLockFile(lockPath);\n  const currentSnapshots = await buildSchemaSnapshots(schemas);\n\n  // Use v2 format for deep diff\n  const v2Lock = existingLock && isLockFileV2(existingLock) ? existingLock : null;\n  const comparison = compareSchemasDeep(currentSnapshots, v2Lock);\n\n  // Check version chain for locked schemas (blockchain-like protection)\n  const chainFilePath = resolve(rootDir, VERSION_CHAIN_FILE);\n  const versionChain = await readVersionChain(chainFilePath);\n\n  if (versionChain && comparison.hasChanges) {\n    // Build list of schemas being removed or modified\n    const schemaActions: { name: string; action: 'delete' | 'modify' }[] = [];\n\n    for (const change of comparison.changes) {\n      if (change.changeType === 'removed') {\n        schemaActions.push({ name: change.schemaName, action: 'delete' });\n      } else if (change.changeType === 'modified') {\n        schemaActions.push({ name: change.schemaName, action: 'modify' });\n      }\n    }\n\n    if (schemaActions.length > 0) {\n      const lockCheck = checkBulkLockViolation(versionChain, schemaActions);\n\n      if (!lockCheck.allowed) {\n        logger.newline();\n        logger.error('🔒 VERSION LOCK VIOLATION DETECTED');\n        logger.error('');\n        logger.error('The following schemas are locked in production:');\n        for (const name of lockCheck.affectedSchemas) {\n          logger.error(`  • ${name}`);\n        }\n        logger.error('');\n        logger.error(`Locked in version(s): ${lockCheck.lockedInVersions.join(', ')}`);\n        logger.error('');\n        logger.error('These schemas CANNOT be modified or deleted.');\n        logger.error('This is enforced by the blockchain-like version chain.');\n        logger.newline();\n\n        throw new OmnifyError(\n          lockCheck.reason ?? 'Schema modification blocked by version lock',\n          'E407',\n          undefined,\n          'Restore the original schema files or create new schemas instead of modifying locked ones.'\n        );\n      }\n    }\n  }\n\n  // Validate existing migrations (check for missing/modified files)\n  if (existingLock && config.output.laravel?.migrationsPath) {\n    const migrationsDir = resolve(rootDir, config.output.laravel.migrationsPath);\n    const migrationValidation = await validateMigrations(existingLock, migrationsDir);\n\n    // Report validation results\n    if (!migrationValidation.valid) {\n      logger.newline();\n      logger.warn('Migration file issues detected:');\n\n      if (migrationValidation.missingFiles.length > 0) {\n        logger.error(`  Missing files (${migrationValidation.missingFiles.length}):`);\n        for (const file of migrationValidation.missingFiles) {\n          logger.error(`    - ${file}`);\n        }\n      }\n\n      if (migrationValidation.modifiedFiles.length > 0) {\n        logger.warn(`  Modified files (${migrationValidation.modifiedFiles.length}):`);\n        for (const file of migrationValidation.modifiedFiles) {\n          logger.warn(`    - ${file} (checksum mismatch)`);\n        }\n      }\n\n      logger.newline();\n    }\n\n    // Report stale migrations if --warn-stale is enabled\n    if ((options.warnStale ?? true) && migrationValidation.staleFiles.length > 0) {\n      logger.newline();\n      logger.warn('⚠️  Stale migrations detected (old timestamp, not in lock file):');\n      for (const file of migrationValidation.staleFiles) {\n        logger.warn(`    - ${file}`);\n      }\n      logger.warn('  These may be from merged branches. Review before running migrate.');\n      logger.newline();\n    }\n\n    // Check mode: exit with status based on validation\n    if (options.check) {\n      logger.newline();\n      logger.step('CI Check Mode Results:');\n      logger.info(`  Schemas: ${schemaCount}`);\n      logger.info(`  Tracked migrations: ${migrationValidation.totalTracked}`);\n      logger.info(`  Migrations on disk: ${migrationValidation.totalOnDisk}`);\n      logger.info(`  Schema changes: ${comparison.changes.length}`);\n\n      const hasIssues = !migrationValidation.valid || comparison.hasChanges;\n\n      if (hasIssues) {\n        logger.newline();\n        if (comparison.hasChanges) {\n          logger.error('❌ Schema changes detected - run \"npx omnify generate\" to update migrations');\n        }\n        if (migrationValidation.missingFiles.length > 0) {\n          logger.error('❌ Missing migration files - regenerate or restore from git');\n        }\n        if (migrationValidation.modifiedFiles.length > 0) {\n          logger.warn('⚠️  Modified migration files - may cause inconsistencies');\n        }\n        process.exit(1);\n      } else {\n        logger.success('✅ All migrations in sync');\n        return;\n      }\n    }\n\n    // Regenerate missing CREATE migration files\n    if (migrationValidation.missingFiles.length > 0 && config.output.laravel) {\n      const toRegenerate = getMigrationsToRegenerate(existingLock, migrationValidation.missingFiles);\n\n      if (toRegenerate.length > 0) {\n        const createMigrations = toRegenerate.filter(m => m.type === 'create');\n        const alterMigrations = toRegenerate.filter(m => m.type === 'alter' || m.type === 'drop');\n\n        if (createMigrations.length > 0) {\n          logger.info(`Regenerating ${createMigrations.length} missing CREATE migration(s) with original timestamps...`);\n          const migrationsDir = resolve(rootDir, config.output.laravel.migrationsPath);\n\n          // Extract custom types for generation\n          const customTypesMap = new Map<string, import('@famgia/omnify-types').CustomTypeDefinition>();\n          for (const plugin of config.plugins) {\n            if (plugin.types) {\n              for (const [typeName, typeDef] of Object.entries(plugin.types)) {\n                customTypesMap.set(typeName, typeDef);\n              }\n            }\n          }\n\n          for (const migData of createMigrations) {\n            // Find schema(s) for this migration\n            const migrationSchemas = Object.fromEntries(\n              Object.entries(schemas).filter(([name]) => migData.schemas.includes(name))\n            ) as SchemaCollection;\n\n            if (Object.keys(migrationSchemas).length === 0) {\n              logger.warn(`  Cannot regenerate ${migData.fileName}: schema not found`);\n              continue;\n            }\n\n            // Regenerate with original timestamp\n            const regenerated = generateMigrations(migrationSchemas, {\n              timestamp: migData.timestamp,\n              customTypes: customTypesMap,\n            });\n\n            for (const mig of regenerated) {\n              // Use the original filename to maintain consistency\n              const filePath = resolve(migrationsDir, migData.fileName);\n              writeFileSync(filePath, mig.content);\n              logger.success(`  Regenerated: ${migData.fileName}`);\n            }\n          }\n        }\n\n        if (alterMigrations.length > 0) {\n          logger.warn(`Cannot regenerate ${alterMigrations.length} ALTER/DROP migration(s) - original change data not available.`);\n          logger.warn('  Please restore these files from git or reset migrations with: npx omnify reset');\n          for (const m of alterMigrations) {\n            logger.warn(`    - ${m.fileName}`);\n          }\n        }\n      }\n    }\n  }\n\n  // Only skip if no changes AND no outputs to regenerate\n  // Models/TypeScript with overwrite: true should always be regenerated\n  const skipMigrations = !comparison.hasChanges && !options.force;\n  const pluginsHaveGenerators = config.plugins.some(p => p.generators && p.generators.length > 0);\n  const hasTypescriptOutput = !!config.output.typescript;\n\n  if (skipMigrations && !config.output.laravel?.modelsPath && !pluginsHaveGenerators && !hasTypescriptOutput) {\n    logger.success('No changes to generate');\n    return;\n  }\n\n  if (comparison.hasChanges) {\n    logger.debug(`Detected ${comparison.changes.length} change(s)`);\n    for (const change of comparison.changes) {\n      logSchemaChange(change, options.verbose ?? false);\n    }\n  }\n\n  let migrationsGenerated = 0;\n  let typesGenerated = 0;\n  let modelsGenerated = 0;\n  let factoriesGenerated = 0;\n\n  // Check if plugins have generators\n  const usePlugins = hasPluginGenerators(config.plugins);\n\n  // Extract custom types from plugins for generators\n  const customTypesMap = new Map<string, import('@famgia/omnify-types').CustomTypeDefinition>();\n  for (const plugin of config.plugins) {\n    if (plugin.types) {\n      for (const typeDef of plugin.types) {\n        customTypesMap.set(typeDef.name, typeDef);\n      }\n    }\n  }\n\n  // Extract plugin enums for TypeScript generation\n  const pluginEnumsMap = new Map<string, import('@famgia/omnify-types').PluginEnumDefinition>();\n  for (const plugin of config.plugins) {\n    if (plugin.enums) {\n      for (const enumDef of plugin.enums) {\n        pluginEnumsMap.set(enumDef.name, enumDef);\n      }\n    }\n  }\n\n  if (usePlugins) {\n    // Use plugin system for generation\n    logger.step('Running plugin generators...');\n    const counts = await runPluginGeneration(\n      config.plugins,\n      schemas,\n      rootDir,\n      options.verbose ?? false,\n      comparison.changes\n    );\n    migrationsGenerated = counts.migrations;\n    typesGenerated = counts.types;\n\n    if (counts.migrations > 0) {\n      logger.success(`Generated ${counts.migrations} migration(s)`);\n    }\n    if (counts.types > 0) {\n      logger.success(`Generated ${counts.types} TypeScript file(s)`);\n    }\n    if (counts.models > 0) {\n      logger.success(`Generated ${counts.models} model(s)`);\n    }\n    if (counts.factories > 0) {\n      logger.success(`Generated ${counts.factories} factory(ies)`);\n    }\n    if (counts.other > 0) {\n      logger.success(`Generated ${counts.other} other file(s)`);\n    }\n\n    // Generate TypeScript from output.typescript config (even when using plugins)\n    if (!options.migrationsOnly && config.output.typescript && typesGenerated === 0) {\n      logger.step('Generating TypeScript types...');\n\n      const tsConfig2 = config.output.typescript as {\n        path: string;\n        schemasDir?: string;\n        enumDir?: string;\n        generateRules?: boolean;\n        validationTemplates?: Record<string, Record<string, string>>;\n      };\n\n      // Resolve paths: basePath + subdirectories\n      const basePath2 = resolve(rootDir, tsConfig2.path);\n      const schemasDir2 = resolve(basePath2, tsConfig2.schemasDir ?? 'schemas');\n      const enumDir2 = resolve(basePath2, tsConfig2.enumDir ?? 'enum');\n\n      // Generated files go to node_modules/@omnify-base (auto-generated)\n      const omnifyBaseDir2 = resolve(rootDir, 'node_modules/@omnify-base');\n      const pluginEnumDir2 = resolve(omnifyBaseDir2, 'enum');\n      const baseSchemasDir2 = resolve(omnifyBaseDir2, 'schemas');\n\n      // Calculate enum import prefix (relative path from schemas to enum)\n      const enumImportPrefix2 = relative(schemasDir2, enumDir2).replace(/\\\\/g, '/');\n\n      // Create directories\n      if (!existsSync(schemasDir2)) {\n        mkdirSync(schemasDir2, { recursive: true });\n        logger.debug(`Created directory: ${schemasDir2}`);\n      }\n      if (!existsSync(enumDir2)) {\n        mkdirSync(enumDir2, { recursive: true });\n        logger.debug(`Created directory: ${enumDir2}`);\n      }\n      if (!existsSync(pluginEnumDir2)) {\n        mkdirSync(pluginEnumDir2, { recursive: true });\n        logger.debug(`Created directory: ${pluginEnumDir2}`);\n      }\n      if (!existsSync(baseSchemasDir2)) {\n        mkdirSync(baseSchemasDir2, { recursive: true });\n        logger.debug(`Created directory: ${baseSchemasDir2}`);\n      }\n\n      // Create package.json for @omnify-base package\n      const omnifyPkgJson2 = resolve(omnifyBaseDir2, 'package.json');\n      if (!existsSync(omnifyPkgJson2)) {\n        writeFileSync(omnifyPkgJson2, JSON.stringify({\n          name: '@omnify-base',\n          version: '0.0.0',\n          private: true,\n          exports: {\n            './enum/*': './enum/*.js',\n            './schemas/*': './schemas/*.js',\n          },\n        }, null, 2));\n      }\n\n      // Enable multiLocale if locale config has multiple locales\n      const isMultiLocale = config.locale && config.locale.locales && config.locale.locales.length > 1;\n      const typeFiles = generateTypeScript(schemas, {\n        customTypes: customTypesMap,\n        pluginEnums: pluginEnumsMap,\n        localeConfig: config.locale,\n        multiLocale: isMultiLocale,\n        generateRules: tsConfig2.generateRules ?? true,\n        validationTemplates: tsConfig2.validationTemplates,\n        enumImportPrefix: enumImportPrefix2,\n        pluginEnumImportPrefix: '@omnify-base/enum',\n        baseImportPrefix: '@omnify-base/schemas',\n        schemaEnumImportPrefix: '@omnify/enum', // Absolute path for node_modules base files\n      });\n\n      for (const file of typeFiles) {\n        // Determine output directory based on file category\n        let outputDir2: string;\n        let outputFilePath2 = file.filePath;\n\n        if (file.category === 'plugin-enum') {\n          outputDir2 = pluginEnumDir2;\n        } else if (file.category === 'base') {\n          // Base files go to node_modules/@omnify-base/schemas/\n          outputDir2 = baseSchemasDir2;\n          // Remove 'base/' prefix from filePath since we're already in schemas/\n          outputFilePath2 = file.filePath.replace(/^base\\//, '');\n        } else if (file.category === 'enum') {\n          outputDir2 = enumDir2;\n        } else {\n          outputDir2 = schemasDir2;\n        }\n        const filePath = resolve(outputDir2, outputFilePath2);\n        const fileDir = dirname(filePath);\n        if (!existsSync(fileDir)) {\n          mkdirSync(fileDir, { recursive: true });\n        }\n        // Skip if file exists and shouldn't be overwritten\n        if (!file.overwrite && existsSync(filePath)) {\n          logger.debug(`Skipped (exists): ${file.filePath}`);\n          continue;\n        }\n        writeFileSync(filePath, file.content);\n        logger.debug(`Created: ${file.filePath}`);\n        typesGenerated++;\n      }\n\n      logger.success(`Generated ${typesGenerated} TypeScript file(s)`);\n\n      // Auto-configure @omnify alias (silent mode - only log if changes made)\n      const aliasResult = configureOmnifyAlias(rootDir, tsConfig2.path, true);\n      if (aliasResult.viteUpdated) {\n        logger.success('Auto-configured @omnify alias in vite.config');\n      }\n      if (aliasResult.tsconfigUpdated) {\n        logger.success('Auto-configured @omnify/* path in tsconfig.json');\n      }\n\n      // Configure @omnify-base alias (always needed for base schemas, enums, common, i18n)\n      const pluginAliasResult = addPluginEnumAlias(rootDir);\n      if (pluginAliasResult.updated) {\n        logger.success('Auto-configured @omnify-base alias in vite.config');\n      }\n      const pluginPathResult = addPluginEnumTsconfigPath(rootDir);\n      if (pluginPathResult.updated) {\n        logger.success('Auto-configured @omnify-base/* path in tsconfig.json');\n      }\n\n      // Generate TypeScript AI guides if needed\n      if (shouldGenerateTypescriptAIGuides(rootDir)) {\n        const tsAIResult = generateTypescriptAIGuides(rootDir, {\n          typescriptPath: tsConfig2.path,\n        });\n        const tsClaudeTotal = tsAIResult.claudeGuides + tsAIResult.claudeChecklists;\n        if (tsClaudeTotal > 0 || tsAIResult.cursorRules > 0) {\n          logger.debug(`Generated ${tsClaudeTotal} React Claude files, ${tsAIResult.cursorRules} Cursor rules`);\n        }\n      }\n    }\n  } else {\n    // Use direct generation (legacy mode)\n    const counts = runDirectGeneration(schemas, config, rootDir, options, comparison.changes);\n    migrationsGenerated = counts.migrations;\n    typesGenerated = counts.types;\n    modelsGenerated = counts.models;\n    factoriesGenerated = counts.factories;\n  }\n\n  // Update lock file (v2 with snapshots)\n  logger.step('Updating lock file...');\n  const newLockFile = updateLockFile(existingLock, currentSnapshots, config.database.driver);\n  await writeLockFile(lockPath, newLockFile);\n  logger.debug(`Updated: ${config.lockFilePath}`);\n\n  // Save version history only when there are actual schema changes\n  if (comparison.hasChanges) {\n    logger.step('Saving version history...');\n    const versionStore = createVersionStore({ baseDir: rootDir, maxVersions: 100 });\n    const versionSnapshot = schemasToVersionSnapshot(schemas);\n    const versionChanges: VersionChange[] = comparison.changes.flatMap(schemaChangeToVersionChange);\n\n    // Get migration file name for version description\n    const migrationFileName = migrationsGenerated > 0\n      ? `${migrationsGenerated} migration(s)`\n      : undefined;\n\n    try {\n      const newVersion = await versionStore.createVersion(\n        versionSnapshot,\n        versionChanges,\n        {\n          driver: config.database.driver,\n          ...(migrationFileName !== undefined && { migration: migrationFileName }),\n          description: `Generated ${comparison.changes.length} change(s)`,\n        }\n      );\n      logger.debug(`Created version ${newVersion.version}`);\n    } catch (versionError) {\n      // Version history is optional, log but don't fail\n      logger.debug(`Could not save version history: ${(versionError as Error).message}`);\n    }\n  }\n\n  // Generate AI guides\n  try {\n    const guidesWritten = generateAIGuides(rootDir, config.plugins);\n    if (guidesWritten > 0) {\n      logger.debug(`Updated ${guidesWritten} AI guide file(s)`);\n    }\n  } catch (guideError) {\n    // AI guides are optional, log but don't fail\n    logger.debug(`Could not generate AI guides: ${(guideError as Error).message}`);\n  }\n\n  logger.newline();\n  logger.success('Generation complete!');\n\n  if (migrationsGenerated > 0 && config.output.laravel) {\n    logger.info(`  Migrations: ${config.output.laravel.migrationsPath}/`);\n  }\n  if (modelsGenerated > 0 && config.output.laravel?.modelsPath) {\n    logger.info(`  Models: ${config.output.laravel.modelsPath}/`);\n  }\n  if (typesGenerated > 0 && config.output.typescript) {\n    logger.info(`  Types: ${config.output.typescript.path}/`);\n  }\n}\n\n/**\n * Registers the generate command.\n */\nexport function registerGenerateCommand(program: Command): void {\n  program\n    .command('generate')\n    .description('Generate Laravel migrations and TypeScript types')\n    .option('-v, --verbose', 'Show detailed output')\n    .option('--migrations-only', 'Only generate migrations')\n    .option('--types-only', 'Only generate TypeScript types')\n    .option('-f, --force', 'Generate even if no changes detected')\n    .option('--check', 'CI mode: check if migrations are in sync without generating (exits with code 1 if out of sync)')\n    .option('--no-warn-stale', 'Disable stale migration warnings')\n    .action(async (options: GenerateOptions) => {\n      try {\n        await runGenerate(options);\n      } catch (error) {\n        if (error instanceof OmnifyError) {\n          logger.formatError(error);\n          process.exit(logger.getExitCode(error));\n        } else if (error instanceof Error) {\n          logger.error(error.message);\n          process.exit(1);\n        }\n        process.exit(1);\n      }\n    });\n}\n","/**\n * @famgia/omnify-cli - AI Guide Generator\n *\n * Generates base Omnify documentation (CLAUDE.md + core guides).\n * Plugin-specific guides are generated by respective plugins.\n */\n\nimport { existsSync, writeFileSync, mkdirSync, readdirSync, readFileSync, copyFileSync } from 'node:fs';\nimport { resolve, dirname, join } from 'node:path';\nimport { fileURLToPath } from 'node:url';\nimport type { OmnifyPlugin } from '@famgia/omnify-types';\n\n/**\n * CLAUDE.md content for project root\n * Uses Claude Code's official memory format with @imports\n */\nconst CLAUDE_MD = `# Omnify Project\n\nThis project uses **Omnify** for schema-driven code generation.\n\n## Quick Reference\n\n- **Schema Guide**: @.claude/omnify/guides/omnify/schema-guide.md\n- **Config Guide**: @.claude/omnify/guides/omnify/config-guide.md\n\n## Commands\n\n\\`\\`\\`bash\nnpx omnify generate    # Generate code from schemas\nnpx omnify validate    # Validate schemas\nphp artisan migrate    # Run database migrations\n\\`\\`\\`\n\n## Critical Rules\n\n### ⛔ DO NOT EDIT Auto-Generated Files\n- \\`database/migrations/omnify/**\\` - Regenerated on \\`npx omnify generate\\`\n- \\`app/Models/OmnifyBase/**\\` - Base models (extend, don't edit)\n- \\`app/Http/Requests/OmnifyBase/**\\` - Base requests\n- \\`app/Http/Resources/OmnifyBase/**\\` - Base resources\n\n### ✅ Schema-First Workflow\n1. Edit YAML schema in \\`schemas/\\`\n2. Run \\`npx omnify generate\\`\n3. Run \\`php artisan migrate\\`\n\n**NEVER use \\`php artisan make:migration\\`** - Always use schemas!\n\n## Documentation Structure\n\n\\`\\`\\`\n.claude/\n├── CLAUDE.md              # This file (root pointer)\n├── rules/                 # Claude Code rules (path-specific)\n│   └── omnify/*.md\n└── omnify/                # Detailed guides\n    ├── guides/\n    │   ├── omnify/        # Schema & config docs\n    │   ├── laravel/       # Laravel patterns\n    │   └── react/         # React patterns\n    ├── workflows/         # Step-by-step workflows\n    └── agents/            # AI agent prompts\n\\`\\`\\`\n\n## Individual Preferences\n\nAdd your personal preferences in \\`CLAUDE.local.md\\` (gitignored).\n`;\n\n/**\n * Copies core Omnify guides (schema-guide, config-guide) to .claude/omnify/guides/omnify/\n */\nfunction copyOmnifyGuides(rootDir: string): number {\n  let filesWritten = 0;\n\n  // Find @famgia/omnify package stubs directory\n  const omnifyPkgPaths = [\n    resolve(rootDir, 'node_modules', '@famgia', 'omnify', 'stubs', 'ai-guides', 'omnify'),\n    resolve(rootDir, 'node_modules', '.pnpm', '@famgia+omnify@*', 'node_modules', '@famgia', 'omnify', 'stubs', 'ai-guides', 'omnify'),\n  ];\n\n  // Also check if we're in monorepo (packages/omnify/stubs)\n  let stubsDir: string | null = null;\n  for (const pkgPath of omnifyPkgPaths) {\n    // Handle glob-like path for pnpm\n    if (pkgPath.includes('*')) {\n      const parentDir = dirname(dirname(pkgPath));\n      if (existsSync(parentDir)) {\n        const entries = readdirSync(parentDir);\n        for (const entry of entries) {\n          if (entry.startsWith('@famgia+omnify@')) {\n            const testPath = join(parentDir, entry, 'node_modules', '@famgia', 'omnify', 'stubs', 'ai-guides', 'omnify');\n            if (existsSync(testPath)) {\n              stubsDir = testPath;\n              break;\n            }\n          }\n        }\n      }\n    } else if (existsSync(pkgPath)) {\n      stubsDir = pkgPath;\n      break;\n    }\n  }\n\n  if (!stubsDir) {\n    // Fallback: check via require.resolve\n    try {\n      const omnifyPath = dirname(require.resolve('@famgia/omnify/package.json', { paths: [rootDir] }));\n      const testPath = join(omnifyPath, 'stubs', 'ai-guides', 'omnify');\n      if (existsSync(testPath)) {\n        stubsDir = testPath;\n      }\n    } catch {\n      // Package not found\n    }\n  }\n\n  if (!stubsDir) {\n    return 0; // No stubs found\n  }\n\n  // Destination: .claude/omnify/guides/omnify/\n  const destDir = resolve(rootDir, '.claude', 'omnify', 'guides', 'omnify');\n  mkdirSync(destDir, { recursive: true });\n\n  // Copy all .stub files\n  const files = readdirSync(stubsDir).filter(f => f.endsWith('.stub'));\n  for (const file of files) {\n    const srcPath = join(stubsDir, file);\n    const destPath = join(destDir, file.replace('.stub', ''));\n\n    const content = readFileSync(srcPath, 'utf8');\n    writeFileSync(destPath, content);\n    filesWritten++;\n  }\n\n  return filesWritten;\n}\n\n/**\n * Generates CLAUDE.md pointer file and copies core Omnify guides.\n * Plugin-specific guides are generated by respective plugins.\n *\n * Note: Always overwrites files to ensure:\n * 1. Deleted files are restored\n * 2. Updated content from omnify packages is synced\n */\nexport function generateAIGuides(\n  rootDir: string,\n  _plugins: readonly OmnifyPlugin[]\n): number {\n  let filesWritten = 0;\n\n  // Always write CLAUDE.md (overwrite to sync updates)\n  const claudeMdPath = resolve(rootDir, 'CLAUDE.md');\n  writeFileSync(claudeMdPath, CLAUDE_MD);\n  filesWritten++;\n\n  // Copy core Omnify guides (schema-guide.md, config-guide.md)\n  filesWritten += copyOmnifyGuides(rootDir);\n\n  return filesWritten;\n}\n"],"mappings":"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","names":["import_node_fs","import_node_path","import_omnify_core","pc","module","import_node_fs","import_node_path","import_node_fs","import_node_path","schemasDir","import_node_fs","import_node_path","import_omnify_core","import_node_fs","import_node_path","import_omnify_core","import_picocolors","pc","import_node_fs","import_node_path","import_omnify_core","import_omnify_atlas","import_node_fs","import_node_path","migrationsDir","customTypesMap","shouldGenerateTypescriptAIGuides","generateTypescriptAIGuides"]}